"use strict";window.g_bee=class{constructor(e,g){this.g_aov=e,this.g_bef=g,this.g_beg=!1,this.g_anA=()=>this.g_Jj()}g_beh(){}g_bei(e,g,_,n){this.g_aov.g_bej(this.g_bef,e,g,_,n)}g_bek(e,g,_,n){return this.g_aov.g_bel(this.g_bef,e,g,_,n)}g_bem(e,g,_){this.g_aov.g_ben()?this.g_bei(e,g,_):this.g_aov.g_beo()._OnMessageFromDOM({type:"event",component:this.g_bef,handler:e,dispatchOpts:_||null,data:g,responseId:null})}g_bep(e,g){this.g_aov.g_beq(this.g_bef,e,g)}g_ber(e){for(const[g,_]of e)this.g_bep(g,_)}g_bes(){return this.g_aov}g_bet(){return this.g_bef}g_abK(){this.g_beg||(this.g_aov.g_beu(this.g_anA),this.g_beg=!0)}g_abv(){this.g_beg&&(this.g_aov.g_bev(this.g_anA),this.g_beg=!1)}g_Jj(){}},"use strict",window.g_bew=class extends g_bee{constructor(e,g){super(e,g),this.g_bex=new Map,this.g_bey=!0,this.g_bep("create",e=>this.g_bez(e)),this.g_bep("destroy",e=>this.g_beA(e)),this.g_bep("set-visible",e=>this.g_beB(e)),this.g_bep("update-position",e=>this.g_beC(e)),this.g_bep("update-state",e=>this.g_aDz(e)),this.g_bep("focus",e=>this.g_beD(e)),this.g_bep("set-css-style",e=>this.g_beE(e))}g_beF(e){this.g_bey=!!e}g_beG(e,g){this.g_bep(e,e=>{const _=e.elementId,n=this.g_bex.get(_);return g(n,e)})}g_bez(e){const g=e.elementId,_=this.g_aci(g,e);this.g_bex.set(g,_),e.isVisible||(_.style.display="none"),this.g_bey&&document.body.appendChild(_)}g_aci(){throw new Error("required override")}g_beH(){}g_beA(e){const g=e.elementId,_=this.g_bex.get(g);this.g_beH(_),this.g_bey&&_.parentElement.removeChild(_),this.g_bex.delete(g)}g_beI(e,g,_){_||(_={}),_.elementId=g,this.g_bei(e,_)}g_beJ(e,g,_){_||(_={}),_.elementId=g,this.g_bem(e,_)}g_beB(e){if(this.g_bey){const g=this.g_bex.get(e.elementId);g.style.display=e.isVisible?"":"none"}}g_beC(e){if(this.g_bey){const g=this.g_bex.get(e.elementId);g.style.left=e.left+"px",g.style.top=e.top+"px",g.style.width=e.width+"px",g.style.height=e.height+"px";const _=e.fontSize;null!==_&&(g.style.fontSize=_+"em")}}g_aDz(e){const g=this.g_bex.get(e.elementId);this.g_beK(g,e)}g_beK(){throw new Error("required override")}g_beD(e){const g=this.g_bex.get(e.elementId);e.focus?g.focus():g.blur()}g_beE(e){const g=this.g_bex.get(e.elementId);g.style[e.prop]=e.val}g_beL(e){return this.g_bex.get(e)}},"use strict";{function _(e){return new Promise((g,_)=>{const n=document.createElement("script");n.onload=g,n.onerror=_,n.async=!1,n.src=e,document.head.appendChild(n)})}async function n(e){const g=await t(e),_=new TextDecoder("utf-8");return _.decode(g)}function t(e){return new Promise((g,_)=>{const n=new FileReader;n.onload=e=>g(e.target.result),n.onerror=e=>_(e),n.readAsArrayBuffer(e)})}const b=/(iphone|ipod|ipad)/i.test(navigator.userAgent);let a=new Audio;const o={"audio/webm; codecs=opus":!!a.canPlayType("audio/webm; codecs=opus"),"audio/ogg; codecs=opus":!!a.canPlayType("audio/ogg; codecs=opus"),"audio/webm; codecs=vorbis":!!a.canPlayType("audio/webm; codecs=vorbis"),"audio/ogg; codecs=vorbis":!!a.canPlayType("audio/ogg; codecs=vorbis"),"audio/mp4":!!a.canPlayType("audio/mp4"),"audio/mpeg":!!a.canPlayType("audio/mpeg")};a=null;const e=[];let g=0;window.RealFile=window.File;const r=[],i=new Map,s=new Map;let u=0;const l=[];self.g_beM=function(e){if("function"!=typeof e)throw new Error("runOnStartup called without a function");l.push(e)},window.g_beN=class d{constructor(e){this.g_beO=e.g_beP,this.g_beQ=null,this.g_amz="",this.g_beR=e.g_beS,this.g_beT={},this.g_beU=null,this.g_beV=null,this.g_beW=[],this.g_beX=null,this.g_akA=null,this.g_aop=null,this.g_alh=-1,this.g_beY=()=>this.g_beZ(),this.g_be_=[],this.g_amE=e.g_be$,("cordova"===this.g_amE||"playable-ad"===this.g_amE||"instant-games"===this.g_amE)&&this.g_beO&&(console.warn("[C3 runtime] Worker mode is enabled and supported, but is disabled in WebViews due to crbug.com/923007. Reverting to DOM mode."),this.g_beO=!1),/CrOS/.test(navigator.userAgent)&&(console.warn("[C3 runtime] Worker mode is enabled and supported, but is disabled in Chrome OS due to reports of crashes. Reverting to DOM mode."),this.g_beO=!1),this.g_bfa=!1,this.g_bfb=null,("html5"===this.g_amE||"playable-ad"===this.g_amE)&&"file"===location.protocol.substr(0,4)&&alert("Exported games won't work until you upload them. (When running on the file: protocol, browsers block many features from working for security reasons.)"),this.g_beq("runtime","cordova-fetch-local-file",e=>this.g_bfc(e)),this.g_beq("runtime","create-job-worker",e=>this.g_bfd(e)),"cordova"===this.g_amE?document.addEventListener("deviceready",()=>this.g_aay(e)):this.g_aay(e)}g_em(){this.g_bfe(),this.g_beQ&&(this.g_beQ.onmessage=null,this.g_beQ=null),this.g_beU&&(this.g_beU.terminate(),this.g_beU=null),this.g_beV&&(this.g_beV.g_em(),this.g_beV=null),this.g_akA&&(this.g_akA.parentElement.removeChild(this.g_akA),this.g_akA=null)}g_bff(){return this.g_akA}g_fg(){return this.g_amz}g_ben(){return this.g_beO}g_apV(){return this.g_amE}g_aoN(){return"cordova"===this.g_amE&&b}g_bfg(){return"cordova"===this.g_amE&&!1===b}async g_aay(e){if("playable-ad"===this.g_amE){this.g_bfb=self.c3_base64files,await this.g_bfh();for(let g=0,_=e.g_bfi.length;g<_;++g){const _=e.g_bfi[g].toLowerCase();this.g_bfb.hasOwnProperty(_)&&(e.g_bfi[g]=URL.createObjectURL(this.g_bfb[_]))}}if(e.g_bfj)this.g_amz=e.g_bfj;else{const e=location.origin;this.g_amz=("null"===e?"file:///":e)+location.pathname;const g=this.g_amz.lastIndexOf("/");-1!==g&&(this.g_amz=this.g_amz.substr(0,g+1))}if(e.g_bfk)for(const[g,_]of Object.entries(e.g_bfk))this.g_beT[g]=URL.createObjectURL(_);const g=new MessageChannel;this.g_beQ=g.port1,this.g_beQ.onmessage=e=>this._OnMessageFromRuntime(e.data),window.c3_addPortMessageHandler&&window.c3_addPortMessageHandler(e=>this.g_bfl(e)),this.g_aop=new self.g_bfm(this),await this.g_aop.g_ahH(),this.g_bfn(),"object"==typeof window.StatusBar&&window.StatusBar.hide(),"object"==typeof window.AndroidFullScreen&&window.AndroidFullScreen.immersiveMode(),await this.g_bfo(),this.g_beO?await this.g_bfp(e,g.port2):await this.g_bfq(e,g.port2)}g_bfr(e){return this.g_beT.hasOwnProperty(e)?this.g_beT[e]:e.endsWith("/workermain.js")&&this.g_beT.hasOwnProperty("workermain.js")?this.g_beT["workermain.js"]:"playable-ad"===this.g_amE&&this.g_bfb.hasOwnProperty(e.toLowerCase())?URL.createObjectURL(this.g_bfb[e.toLowerCase()]):e}async g_bfs(g,_,n){if(g.startsWith("blob:"))return new Worker(g,n);if(this.g_aoN()){const e=await this.g_As(this.g_beR+g),_=new Blob([e],{type:"application/javascript"});return new Worker(URL.createObjectURL(_),n)}const t=new URL(g,_),b=location.origin!==t.origin;if(b){const e=await fetch(t);if(!e.ok)throw new Error("failed to fetch worker script");const g=await e.blob();return new Worker(URL.createObjectURL(g),n)}return new Worker(t,n)}g_bfn(){if(this.g_aoN()){const g=document.documentElement.style,_=document.body.style,n=window.innerWidth<window.innerHeight,t=n?window.screen.width:window.screen.height,b=n?window.screen.height:window.screen.width;_.height=g.height=b+"px",_.width=g.width=t+"px"}}g_bft(e){return{baseUrl:this.g_amz,windowInnerWidth:window.innerWidth,windowInnerHeight:window.innerHeight,devicePixelRatio:window.devicePixelRatio,isFullscreen:d.g_alL(),projectData:e.g_bfu,previewImageBlobs:window.cr_previewImageBlobs||this.g_bfb,previewProjectFileBlobs:window.cr_previewProjectFileBlobs,exportType:e.g_be$,isDebug:-1<self.location.search.indexOf("debug"),ife:!!self.g_bfv,jobScheduler:this.g_aop.g_bfw(),supportedAudioFormats:o,opusWasmScriptUrl:window.cr_opusWasmScriptUrl||this.g_beR+"opus.wasm.js",opusWasmBinaryUrl:window.cr_opusWasmBinaryUrl||this.g_beR+"opus.wasm.wasm",isWKWebView:this.g_aoN(),isFBInstantAvailable:"undefined"!=typeof self.FBInstant}}async g_bfp(e,g){const _=this.g_bfr(e.g_bfx);this.g_beU=await this.g_bfs(_,this.g_amz,{name:"Runtime"}),this.g_akA=document.createElement("canvas"),this.g_akA.style.display="none";const n=this.g_akA.transferControlToOffscreen();document.body.appendChild(this.g_akA),window.c3canvas=this.g_akA,this.g_beU.postMessage(Object.assign(this.g_bft(e),{type:"init-runtime",isInWorker:!0,messagePort:g,canvas:n,workerDependencyScripts:e.g_bfy||[],engineScripts:e.g_bfi,projectScripts:window.g_bfz,projectScriptsStatus:self.C3_ProjectScriptsStatus}),[g,n,...this.g_aop.g_bfA()]),this.g_beW=r.map(e=>new e(this)),this.g_bfB(),self.c3_callFunction=(e,g)=>this.g_beX.g_S$(e,g),"preview"===this.g_amE&&(self.goToLastErrorScript=()=>this.g_bej("runtime","go-to-last-error-script"))}async g_bfq(g,n){this.g_akA=document.createElement("canvas"),this.g_akA.style.display="none",document.body.appendChild(this.g_akA),window.c3canvas=this.g_akA,this.g_beW=r.map(e=>new e(this)),this.g_bfB();const t=g.g_bfi.map(e=>new URL(e,this.g_amz).toString());if(Array.isArray(g.g_bfy)&&t.unshift(...g.g_bfy),await Promise.all(t.map(e=>_(e))),g.g_bfC&&0<g.g_bfC.length){const e=self.C3_ProjectScriptsStatus;try{if(await Promise.all(g.g_bfC.map(e=>_(e[1]))),Object.values(e).some(e=>!e))return void self.setTimeout(()=>this.g_bfD(e),100)}catch(g){return console.error("[Preview] Error loading project scripts: ",g),void self.setTimeout(()=>this.g_bfD(e),100)}}if("preview"===this.g_amE&&"object"!=typeof self.g_aQ.g_bed)return console.error("[C3 runtime] Failed to load JavaScript code used in events. Check all your JavaScript code has valid syntax."),void alert("Failed to load JavaScript code used in events. Check all your JavaScript code has valid syntax.");const b=Object.assign(this.g_bft(g),{isInWorker:!1,messagePort:n,canvas:this.g_akA,runOnStartupFunctions:l});this.g_beV=self.C3_CreateRuntime(b),await self.C3_InitRuntime(this.g_beV,b)}g_bfD(e){const g=Object.entries(e).filter(e=>!e[1]).map(e=>e[0]),_=`Failed to load project script '${g[0]}'. Check all your JavaScript code has valid syntax.`;console.error("[Preview] "+_),alert(_)}async g_bfd(){const e=await this.g_aop.g_bfE();return{outputPort:e,transferables:[e]}}g_beo(){if(this.g_beO)throw new Error("not available in worker mode");return this.g_beV}g_bej(g,_,n,t,b){this.g_beQ.postMessage({type:"event",component:g,handler:_,dispatchOpts:t||null,data:n,responseId:null},this.g_bfa?void 0:b)}g_bel(_,n,t,b,i){const e=u++,a=new Promise((g,_)=>{s.set(e,{resolve:g,reject:_})});return this.g_beQ.postMessage({type:"event",component:_,handler:n,dispatchOpts:b||null,data:t,responseId:e},this.g_bfa?void 0:i),a}["_OnMessageFromRuntime"](e){const g=e.type;if("event"===g)this.g_bfF(e);else if("result"===g)this.g_bfG(e);else if("runtime-ready"===g)this.g_bfH();else if("alert"===g)alert(e.message);else throw new Error(`unknown message '${g}'`)}g_bfF(_){const n=_.component,t=_.handler,b=_.data,o=_.responseId,e=i.get(n);if(!e)return void console.warn(`[DOM] No event handlers for component '${n}'`);const a=e.get(t);if(!a)return void console.warn(`[DOM] No handler '${t}' for component '${n}'`);let g=null;try{g=a(b)}catch(e){return console.error(`Exception in '${n}' handler '${t}':`,e),void(null!==o&&this.g_bfI(o,!1,e.toString()))}null!==o&&(g&&g.then?g.then(e=>this.g_bfI(o,!0,e)).catch(e=>{console.error(`Rejection from '${n}' handler '${t}':`,e),this.g_bfI(o,!1,e.toString())}):this.g_bfI(o,!0,g))}g_bfI(e,g,_){let n;_&&_.transferables&&(n=_.transferables),this.g_beQ.postMessage({type:"result",responseId:e,isOk:g,result:_},n)}g_bfG(g){const _=g.responseId,n=g.isOk,t=g.result,b=s.get(_);n?b.resolve(t):b.reject(t),s.delete(_)}g_beq(e,g,_){let n=i.get(e);if(n||(n=new Map,i.set(e,n)),n.has(g))throw new Error(`[DOM] Component '${e}' already has handler '${g}'`);n.set(g,_)}static g_bfJ(e){if(r.includes(e))throw new Error("DOM handler already added");r.push(e)}g_bfB(){for(const e of this.g_beW)if("runtime"===e.g_bet())return void(this.g_beX=e);throw new Error("cannot find runtime DOM handler")}g_bfl(e){this.g_bej("debugger","message",e)}g_bfH(){for(const e of this.g_beW)e.g_beh()}static g_alL(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement)}async g_bfK(){return await this.g_bel("runtime","get-remote-preview-status-info")}g_beu(e){this.g_be_.push(e),this.g_bfL()}g_bev(e){const g=this.g_be_.indexOf(e);if(-1===g)throw new Error("invalid callback");this.g_be_.splice(g,1),this.g_be_.length||this.g_bfe()}g_bfL(){-1===this.g_alh&&this.g_be_.length&&(this.g_alh=requestAnimationFrame(this.g_beY))}g_bfe(){-1!==this.g_alh&&(cancelAnimationFrame(this.g_alh),this.g_alh=-1)}g_beZ(){this.g_alh=-1;for(const e of this.g_be_)e();this.g_bfL()}g_bfM(e){this.g_beX.g_bfM(e)}g_bfN(e){this.g_beX.g_bfN(e)}g_bfO(){this.g_beX.g_bfO()}g_aEl(e){this.g_beX.g_aEl(e)}g_AP(e){return!!o[e]}async g_adC(e){const g=await this.g_bel("runtime","opus-decode",{arrayBuffer:e},null,[e]);return new Float32Array(g)}g_fS(e){return /^(?:[a-z]+:)?\/\//.test(e)||"data:"===e.substr(0,5)||"blob:"===e.substr(0,5)}g_fT(e){return!this.g_fS(e)}async g_bfc(e){const g=e.filename;switch(e.as){case"text":return await this.g_At(g);case"buffer":return await this.g_As(g);default:throw new Error("unsupported type");}}g_bfP(e){const g=window.cordova.file.applicationDirectory+"www/"+e.toLowerCase();return new Promise((e,_)=>{window.resolveLocalFileSystemURL(g,g=>{g.file(e,_)},_)})}async g_At(e){const g=await this.g_bfP(e);return await n(g)}g_bfQ(){if(e.length&&!(8<=g)){g++;const _=e.shift();this.g_bfR(_.filename,_.g_bfS,_.g_bfT)}}g_As(_){return new Promise((n,t)=>{e.push({filename:_,g_bfS:e=>{g--,this.g_bfQ(),n(e)},g_bfT:e=>{g--,this.g_bfQ(),t(e)}}),this.g_bfQ()})}async g_bfR(g,_,e){try{const n=await this.g_bfP(g),b=await t(n);_(b)}catch(g){e(g)}}async g_bfh(){const e=[];for(const[g,_]of Object.entries(this.g_bfb))e.push(this.g_bfU(g,_));await Promise.all(e)}async g_bfU(e,g){if("object"==typeof g)this.g_bfb[e]=new Blob([g.str],{type:g.type});else{const _=await fetch(g),n=await _.blob();this.g_bfb[e]=n}}g_bfo(){let e=null;const g=new Promise(g=>e=g),_=new ArrayBuffer(1),n=new MessageChannel;return n.port2.onmessage=g=>{g.data&&g.data.arrayBuffer||(this.g_bfa=!0,console.warn("MessageChannel transfers determined to be broken. Disabling transferables.")),e()},n.port1.postMessage({arrayBuffer:_},[_]),g}}}{function _(e){return e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents||e.originalEvent&&e.originalEvent.sourceCapabilities&&e.originalEvent.sourceCapabilities.firesTouchEvents}function t(e){return new Promise((g,_)=>{const n=document.createElement("link");n.onload=()=>g(n),n.onerror=e=>_(e),n.rel="stylesheet",n.href=e,document.head.appendChild(n)})}function a(e){return new Promise((g,_)=>{const n=new Image;n.onload=()=>g(n),n.onerror=e=>_(e),n.src=e})}async function r(e){const g=URL.createObjectURL(e);try{return await a(g)}finally{URL.revokeObjectURL(g)}}function s(e){do{if(e.parentNode&&e.hasAttribute("contenteditable"))return!0;e=e.parentNode}while(e);return!1}function d(e){const g=e.target.tagName.toLowerCase();l.has(g)&&e.preventDefault()}function e(e){(e.metaKey||e.ctrlKey)&&e.preventDefault()}function g(){try{return window.parent&&window.parent.document.hasFocus()}catch(e){return!1}}const u=new Map([["OSLeft","MetaLeft"],["OSRight","MetaRight"]]),i={dispatchRuntimeEvent:!0,dispatchUserScriptEvent:!0},j={dispatchUserScriptEvent:!0},c={dispatchRuntimeEvent:!0},l=new Set(["canvas","body","html"]);self.C3_RasterSvgImage=async function(g,_,n){const t=document.createElement("canvas");t.width=_,t.height=n;const b=t.getContext("2d");return b.drawImage(g,0,0,_,n),t};let b=!1;document.addEventListener("pause",()=>b=!0),document.addEventListener("resume",()=>b=!1);const n=class extends g_bee{constructor(g){super(g,"runtime"),this.g_bfV=!0,this.g_bfW=-1,this.g_bfX="any",this.g_bfY=!1,this.g_bfZ=!1,this.g_bf_=null,g.g_beq("canvas","update-size",e=>this.g_bf$(e)),g.g_beq("runtime","invoke-download",e=>this.g_bga(e)),g.g_beq("runtime","raster-svg-image",e=>this.g_bgb(e)),g.g_beq("runtime","set-target-orientation",e=>this.g_bgc(e)),g.g_beq("runtime","register-sw",()=>this.g_bgd()),g.g_beq("runtime","post-to-debugger",e=>this.g_bge(e)),g.g_beq("runtime","go-to-script",e=>this.g_bge(e)),g.g_beq("runtime","before-start-ticking",()=>this.g_bgf()),g.g_beq("runtime","debug-highlight",e=>this.g_bgg(e)),g.g_beq("runtime","enable-device-orientation",()=>this.g_bgh()),g.g_beq("runtime","enable-device-motion",()=>this.g_bgi()),g.g_beq("runtime","add-stylesheet",e=>this.g_bgj(e));const _=new Set(["input","textarea","datalist"]);window.addEventListener("contextmenu",e=>{const g=e.target,n=g.tagName.toLowerCase();_.has(n)||s(g)||e.preventDefault()}),window.addEventListener("selectstart",d),window.addEventListener("gesturehold",d),window.addEventListener("touchstart",d,{passive:!1});const n=g.g_bff();"undefined"==typeof PointerEvent?n.addEventListener("touchstart",d):(window.addEventListener("pointerdown",d,{passive:!1}),n.addEventListener("pointerdown",d)),this.g_bgk=0,window.addEventListener("mousedown",e=>{1===e.button&&e.preventDefault()}),window.addEventListener("mousewheel",e,{passive:!1}),window.addEventListener("wheel",e,{passive:!1}),window.addEventListener("resize",()=>this.g_aly()),this.g_bgl=new Set,this.g_bgm=new WeakSet,this.g_aDr=!1}g_bgf(){return document.addEventListener("visibilitychange",()=>this.g_aor(document.hidden)),document.addEventListener("pause",()=>this.g_aor(!0)),document.addEventListener("resume",()=>this.g_aor(!1)),{isSuspended:!!(document.hidden||b)}}g_beh(){window.addEventListener("focus",()=>this.g_bgn("window-focus")),window.addEventListener("blur",()=>{this.g_bgn("window-blur",{parentHasFocus:g()}),this.g_bgk=0}),window.addEventListener("fullscreenchange",()=>this.g_alz()),window.addEventListener("webkitfullscreenchange",()=>this.g_alz()),window.addEventListener("mozfullscreenchange",()=>this.g_alz()),window.addEventListener("fullscreenerror",e=>this.g_alA(e)),window.addEventListener("webkitfullscreenerror",e=>this.g_alA(e)),window.addEventListener("mozfullscreenerror",e=>this.g_alA(e)),window.addEventListener("keydown",e=>this.g_bgo("keydown",e)),window.addEventListener("keyup",e=>this.g_bgo("keyup",e)),window.addEventListener("dblclick",e=>this.g_bgp("dblclick",e,i)),window.addEventListener("wheel",e=>this.g_bgq("wheel",e)),"undefined"==typeof PointerEvent?(window.addEventListener("mousedown",e=>this.g_bgr("pointerdown",e)),window.addEventListener("mousemove",e=>this.g_bgr("pointermove",e)),window.addEventListener("mouseup",e=>this.g_bgr("pointerup",e)),window.addEventListener("touchstart",e=>this.g_bgs("pointerdown",e)),window.addEventListener("touchmove",e=>this.g_bgs("pointermove",e)),window.addEventListener("touchend",e=>this.g_bgs("pointerup",e)),window.addEventListener("touchcancel",e=>this.g_bgs("pointercancel",e))):(window.addEventListener("pointerdown",e=>this.g_bgt("pointerdown",e)),window.addEventListener("pointermove",e=>this.g_bgt("pointermove",e)),window.addEventListener("pointerup",e=>this.g_bgt("pointerup",e)),window.addEventListener("pointercancel",e=>this.g_bgt("pointercancel",e)));const e=()=>this.g_bfO();window.addEventListener("pointerup",e,!0),window.addEventListener("touchend",e,!0),window.addEventListener("click",e,!0),window.addEventListener("keydown",e,!0),window.addEventListener("gamepadconnected",e,!0)}g_bgn(e,g){this.g_bei(e,g||null,c)}g_bgu(){return Math.max(window.innerWidth,1)}g_bgv(){return Math.max(window.innerHeight,1)}g_aly(){const e=this.g_bgu(),g=this.g_bgv();this.g_bgn("window-resize",{innerWidth:e,innerHeight:g,devicePixelRatio:window.devicePixelRatio}),this.g_aov.g_aoN()&&(-1!==this.g_bfW&&clearTimeout(this.g_bfW),this.g_bgw(e,g,0))}g_bgx(e,g,_){-1!==this.g_bfW&&clearTimeout(this.g_bfW),this.g_bfW=setTimeout(()=>this.g_bgw(e,g,_),48)}g_bgw(g,_,n){const t=this.g_bgu(),b=this.g_bgv();this.g_bfW=-1,t!=g||b!=_?this.g_bgn("window-resize",{innerWidth:t,innerHeight:b,devicePixelRatio:window.devicePixelRatio}):10>n&&this.g_bgx(t,b,n+1)}g_bgc(e){this.g_bfX=e.targetOrientation}g_bgy(){const e=this.g_bfX;if(screen.orientation&&screen.orientation.lock)screen.orientation.lock(e).catch(e=>console.warn("[Construct 3] Failed to lock orientation: ",e));else try{let g=!1;screen.lockOrientation?g=screen.lockOrientation(e):screen.webkitLockOrientation?g=screen.webkitLockOrientation(e):screen.mozLockOrientation?g=screen.mozLockOrientation(e):screen.msLockOrientation&&(g=screen.msLockOrientation(e)),g||console.warn("[Construct 3] Failed to lock orientation")}catch(e){console.warn("[Construct 3] Failed to lock orientation: ",e)}}g_alz(){const e=g_beN.g_alL();e&&"any"!==this.g_bfX&&this.g_bgy(),this.g_bei("fullscreenchange",{isFullscreen:e,innerWidth:this.g_bgu(),innerHeight:this.g_bgv()})}g_alA(e){console.warn("[Construct 3] Fullscreen request failed: ",e),this.g_bei("fullscreenerror",{isFullscreen:g_beN.g_alL(),innerWidth:this.g_bgu(),innerHeight:this.g_bgv()})}g_aor(e){e?this.g_aov.g_bfe():this.g_aov.g_bfL(),this.g_bei("visibilitychange",{hidden:e})}g_bgo(e,g){const _=u.get(g.code)||g.code;this.g_bem(e,{code:_,key:g.key,which:g.which,repeat:g.repeat,altKey:g.altKey,ctrlKey:g.ctrlKey,metaKey:g.metaKey,shiftKey:g.shiftKey,timeStamp:g.timeStamp},i)}g_bgq(e,g){this.g_bei(e,{clientX:g.clientX,clientY:g.clientY,deltaX:g.deltaX,deltaY:g.deltaY,deltaZ:g.deltaZ,deltaMode:g.deltaMode,timeStamp:g.timeStamp},i)}g_bgp(e,g,n){_(g)||("mousedown"===e&&window!==window.top&&window.focus(),this.g_bem(e,{button:g.button,buttons:g.buttons,clientX:g.clientX,clientY:g.clientY,timeStamp:g.timeStamp},n))}g_bgr(e,g){if(!_(g)){"pointerdown"===e&&window!==window.top&&window.focus();const _=this.g_bgk;"pointerdown"===e&&0!==_?e="pointermove":"pointerup"==e&&0!==g.buttons&&(e="pointermove"),this.g_bem(e,{pointerId:1,pointerType:"mouse",button:g.button,buttons:g.buttons,lastButtons:_,clientX:g.clientX,clientY:g.clientY,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,timeStamp:g.timeStamp},i),this.g_bgk=g.buttons,this.g_bgp(g.type,g,j)}}g_bgt(e,g){"pointerdown"===e&&window!==window.top&&window.focus();let _=0;if("mouse"===g.pointerType&&(_=this.g_bgk),this.g_bem(e,{pointerId:g.pointerId,pointerType:g.pointerType,button:g.button,buttons:g.buttons,lastButtons:_,clientX:g.clientX,clientY:g.clientY,width:g.width||0,height:g.height||0,pressure:g.pressure||0,tangentialPressure:g.tangentialPressure||0,tiltX:g.tiltX||0,tiltY:g.tiltY||0,twist:g.twist||0,timeStamp:g.timeStamp},i),"mouse"===g.pointerType){let _="mousemove";"pointerdown"===e?_="mousedown":"pointerup"==e&&(_="pointerup"),this.g_bgp(_,g,j),this.g_bgk=g.buttons}}g_bgs(e,g){"pointerdown"===e&&window!==window.top&&window.focus();for(let _=0,n=g.changedTouches.length;_<n;++_){const n=g.changedTouches[_];this.g_bem(e,{pointerId:n.identifier,pointerType:"touch",button:0,buttons:0,lastButtons:0,clientX:n.clientX,clientY:n.clientY,width:2*(n.radiusX||n.webkitRadiusX||0),height:2*(n.radiusY||n.webkitRadiusY||0),pressure:n.force||n.webkitForce||0,tangentialPressure:0,tiltX:0,tiltY:0,twist:n.rotationAngle||0,timeStamp:g.timeStamp},i)}}g_bgh(){this.g_bfY||(this.g_bfY=!0,window.addEventListener("deviceorientation",e=>this.g_aHm(e)))}g_bgi(){this.g_bfZ||(this.g_bfZ=!0,window.addEventListener("devicemotion",e=>this.g_aHn(e)))}g_aHm(e){this.g_bei("deviceorientation",{alpha:e.alpha||0,beta:e.beta||0,gamma:e.gamma||0,timeStamp:e.timeStamp},i)}g_aHn(_){let n=null;const t=_.acceleration;t&&(n={x:t.x||0,y:t.y||0,z:t.z||0});let a=null;const o=_.accelerationIncludingGravity;o&&(a={x:o.x||0,y:o.y||0,z:o.z||0});let e=null;const r=_.rotationRate;r&&(e={alpha:r.alpha||0,beta:r.beta||0,gamma:r.gamma||0}),this.g_bei("devicemotion",{acceleration:n,accelerationIncludingGravity:a,rotationRate:e,interval:_.interval,timeStamp:_.timeStamp},i)}g_bf$(e){const g=this.g_bes(),_=g.g_bff();_.style.width=e.styleWidth+"px",_.style.height=e.styleHeight+"px",_.style.marginLeft=e.marginLeft+"px",_.style.marginTop=e.marginTop+"px",g.g_bfn(),this.g_bfV&&(_.style.display="",this.g_bfV=!1)}g_bga(g){const _=g.url,n=g.filename,t=document.createElement("a"),e=document.body;t.textContent=n,t.href=_,t.download=n,e.appendChild(t),t.click(),e.removeChild(t)}async g_bgb(_){const n=_.blob,t=_.width,b=_.height,e=await r(n),i=await self.C3_RasterSvgImage(e,t,b);return await createImageBitmap(i)}async g_bgj(e){await t(e.url)}g_bfO(){const e=[...this.g_bgl];if(this.g_bgl.clear(),!this.g_aDr)for(const g of e){const e=g.play();e&&e.catch(()=>{this.g_bgm.has(g)||this.g_bgl.add(g)})}}g_bfM(e){if("function"!=typeof e.play)throw new Error("missing play function");this.g_bgm.delete(e);let g;try{g=e.play()}catch(g){return void this.g_bgl.add(e)}g&&g.catch(()=>{this.g_bgm.has(e)||this.g_bgl.add(e)})}g_bfN(e){this.g_bgl.delete(e),this.g_bgm.add(e)}g_aEl(e){this.g_aDr=!!e}g_bgg(e){const g=e.show;if(!g)return void(this.g_bf_&&(this.g_bf_.style.display="none"));this.g_bf_||(this.g_bf_=document.createElement("div"),this.g_bf_.id="inspectOutline",document.body.appendChild(this.g_bf_));const _=this.g_bf_;_.style.display="",_.style.left=e.left-1+"px",_.style.top=e.top-1+"px",_.style.width=e.width+2+"px",_.style.height=e.height+2+"px",_.textContent=e.name}g_bgd(){window.C3_RegisterSW&&window.C3_RegisterSW()}g_bge(e){window.c3_postToMessagePort&&(e.from="runtime",window.c3_postToMessagePort(e))}g_S$(e,g){return this.g_bek("js-invoke-function",{name:e,params:g})}};g_beN.g_bfJ(n)}{const e=document.currentScript.src;self.g_bfm=class{constructor(g){this.g_bgz=g,this.g_amz=e?e.substr(0,e.lastIndexOf("/")+1):g.g_fg(),this.g_aqA=Math.min(navigator.hardwareConcurrency||2,16),this.g_bgA=null,this.g_bgB=[],this.g_aqy=null,this.g_bgC=null}async g_ahH(){if(this.g_bgD)throw new Error("already initialised");this.g_bgD=!0;const e=this.g_bgz.g_bfr("dispatchworker.js");this.g_bgA=await this.g_bgz.g_bfs(e,this.g_amz,{name:"DispatchWorker"});const g=new MessageChannel;this.g_aqy=g.port1,this.g_bgA.postMessage({type:"_init","in-port":g.port2},[g.port2]),this.g_bgC=await this.g_bfE()}async g_bfE(){const g=this.g_bgB.length,_=this.g_bgz.g_bfr("jobworker.js"),n=await this.g_bgz.g_bfs(_,this.g_amz,{name:"JobWorker"+g}),t=new MessageChannel,b=new MessageChannel;return this.g_bgA.postMessage({type:"_addJobWorker",port:t.port1},[t.port1]),n.postMessage({type:"init",number:g,"dispatch-port":t.port2,"output-port":b.port2},[t.port2,b.port2]),this.g_bgB.push(n),b.port1}g_bfw(){return{inputPort:this.g_aqy,outputPort:this.g_bgC,maxNumWorkers:this.g_aqA}}g_bfA(){return[this.g_aqy,this.g_bgC]}}}if("use strict",window.C3_IsSupported){"undefined"!=typeof OffscreenCanvas;window.c3_runtimeInterface=new g_beN({g_beP:!1,g_bfx:"workermain.js",g_bfi:["scripts/c3runtime.js"],g_beS:"scripts/",g_bfy:[],g_be$:"html5"})}{function e(e,g){return e.length===g.length&&(e===g||e.toLowerCase()===g.toLowerCase())}const g=class extends g_bee{constructor(e){super(e,"audio"),this.g_bgE=null,this.g_bgF=null,this.g_bgG=!1,this.g_bgH=()=>this.g_bgI(),this.g_bgJ=[],this.g_bgK=[],this.g_bgL=null,this.g_bgM="",this.g_bgN=-1,this.g_bgO=new Map,this.g_aDq=1,this.g_aDr=!1,this.g_aDd=0,this.g_ahD=1,this.g_anQ=0,this.g_aDg="HRTF",this.g_aDh="inverse",this.g_bgP=600,this.g_aDm=1e4,this.g_aDn=1,this.g_bgQ=!1,this.g_bgR=!1,this.g_bgS=this.g_aov.g_AP("audio/webm; codecs=opus"),this.g_bgT=new Map,this.g_bgU=new Set,this.g_bgV=!1,this.g_bgW="",this.g_bgX=null,self.C3Audio_OnMicrophoneStream=(e,g)=>this.g_bgY(e,g),this.g_bgZ=null,self.C3Audio_GetOutputStream=()=>this.g_bg_(),this.g_ber([["create-audio-context",e=>this.g_bg$(e)],["play",e=>this.g_bha(e)],["stop",e=>this.g_bhb(e)],["stop-all",()=>this.g_bhc()],["set-paused",e=>this.g_bhd(e)],["set-volume",e=>this.g_bhe(e)],["fade-volume",e=>this.g_bhf(e)],["set-master-volume",e=>this.g_bhg(e)],["set-muted",e=>this.g_bhh(e)],["set-silent",e=>this.g_bhi(e)],["set-looping",e=>this.g_bhj(e)],["set-playback-rate",e=>this.g_bhk(e)],["seek",e=>this.g_bhl(e)],["preload",e=>this.g_bhm(e)],["unload",e=>this.g_F_(e)],["unload-all",()=>this.g_bhn()],["set-suspended",e=>this.g_bho(e)],["add-effect",e=>this.g_bhp(e)],["set-effect-param",e=>this.g_bhq(e)],["remove-effects",e=>this.g_bhr(e)],["tick",e=>this.g_Ip(e)],["load-state",e=>this.g_bhs(e)]])}async g_bg$(e){e.isWKWebView&&(this.g_bgQ=!0),this.g_aDd=e.timeScaleMode,this.g_aDg=["equalpower","HRTF","soundfield"][e.panningModel],this.g_aDh=["linear","inverse","exponential"][e.distanceModel],this.g_bgP=e.refDistance,this.g_aDm=e.maxDistance,this.g_aDn=e.rolloffFactor;const g={latencyHint:e.latencyHint};if("undefined"!=typeof AudioContext)this.g_bgE=new AudioContext(g);else if("undefined"!=typeof webkitAudioContext)this.g_bgE=new webkitAudioContext(g);else throw new Error("Web Audio API not supported");this.g_bgF=this.g_bgE.createGain(),this.g_bgF.connect(this.g_bgE.destination);const _=e.listenerPos;this.g_bgE.listener.setPosition(_[0],_[1],_[2]),this.g_bgE.listener.setOrientation(0,0,1,0,-1,0),window.addEventListener("pointerup",this.g_bgH,!0),window.addEventListener("touchend",this.g_bgH,!0),window.addEventListener("click",this.g_bgH,!0),window.addEventListener("keydown",this.g_bgH,!0),self.C3_GetAudioContextCurrentTime=()=>this.g_bht();try{await Promise.all(e.preloadList.map(e=>this.g_bhu(e.originalUrl,e.url,e.type,!1)))}catch(e){console.error("[Construct 3] Preloading sounds failed: ",e)}return{sampleRate:this.g_bgE.sampleRate}}g_bgI(){if(!this.g_bgG){const e=this.g_bgE;"suspended"===e.state&&e.resume&&e.resume();const g=e.createBuffer(1,220,22050),_=e.createBufferSource();_.buffer=g,_.connect(e.destination),_.start(0),"running"===e.state&&(this.g_bgG=!0,window.removeEventListener("pointerup",this.g_bgH,!0),window.removeEventListener("touchend",this.g_bgH,!0),window.removeEventListener("click",this.g_bgH,!0),window.removeEventListener("keydown",this.g_bgH,!0),this.g_bgH=null)}}g_bhv(){return this.g_bgE}g_bht(){return this.g_bgE.currentTime}g_bhw(){return this.g_bgF}g_bhx(e){const g=this.g_bgT.get(e.toLowerCase());return g?g[0].g_bhy():this.g_bhw()}g_bhz(e,g){e=e.toLowerCase();let _=this.g_bgT.get(e);_||(_=[],this.g_bgT.set(e,_)),g.g_ajk(_.length),g.g_bhA(e),_.push(g),this.g_bhB(e)}g_bhB(e){let g=this.g_bhw();const _=this.g_bgT.get(e);if(_&&_.length){g=_[0].g_bhy();for(let e=0,g=_.length;e<g;++e){const n=_[e];e+1===g?n.g_bhC(this.g_bhw()):n.g_bhC(_[e+1].g_bhy())}}for(const _ of this.g_bhD(e))_.g_bhE(g);this.g_bgX&&this.g_bgW===e&&(this.g_bgX.disconnect(),this.g_bgX.connect(g))}g_bhF(){return this.g_aDq}g_aDW(){return this.g_aDr}g_bhG(){return this.g_aDd}g_Jh(){return this.g_ahD}g_EK(){return this.g_anQ}g_bhH(){return this.g_bgQ}g_bhI(){return this.g_bgS}g_bhJ(){this.g_bgR=!0}g_bhK(){return this.g_aDg}g_bhL(){return this.g_aDh}g_bhM(){return this.g_bgP}g_bhN(){return this.g_aDm}g_bhO(){return this.g_aDn}g_bhP(e,g){return g?this.g_aov.g_adC(e).then(e=>{const g=this.g_bgE.createBuffer(1,e.length,48e3),_=g.getChannelData(0);return _.set(e),g}):new Promise((g,_)=>{this.g_bgE.decodeAudioData(e,g,_)})}g_bfM(e){this.g_aov.g_bfM(e)}g_bfN(e){this.g_aov.g_bfN(e)}g_bhQ(g){let _=0;for(let n=0,e=this.g_bgK.length;n<e;++n){const t=this.g_bgK[n];this.g_bgK[_]=t,t.g_bhR()===g?t.g_em():++_}this.g_bgK.length=_}g_bhS(){let e=0;for(let g=0,_=this.g_bgJ.length;g<_;++g){const _=this.g_bgJ[g];this.g_bgJ[e]=_,_.g_bhT()?_.g_em():++e}this.g_bgJ.length=e}*g_bhD(g){if(g)for(const _ of this.g_bgK)e(_.g_bhU(),g)&&(yield _);else this.g_bgL&&!this.g_bgL.g_bhV()&&(yield this.g_bgL)}async g_bhu(g,_,n,t,b){for(const e of this.g_bgJ)if(e.g_bhW()===_)return await e.g_AE(),e;if(b)return null;t&&(this.g_bgQ||this.g_bgR)&&this.g_bhS();const e=g_bhX.g_pB(this,g,_,n,t);return this.g_bgJ.push(e),await e.g_AE(),e}async g_bhY(_,n,t,b,i){for(const e of this.g_bgK)if(e.g_bhW()===n&&(e.g_bhZ()||i))return e.g_bh_(b),e;const e=await this.g_bhu(_,n,t,i),a=e.g_adR(b);return this.g_bgK.push(a),a}g_bh$(e){let g=this.g_bgO.get(e);if(!g){let _=null;const n=new Promise(e=>_=e);g={g_bia:0,promise:n,resolve:_},this.g_bgO.set(e,g)}g.g_bia++}g_bib(e){const g=this.g_bgO.get(e);if(!g)throw new Error("expected pending tag");g.g_bia--,0===g.g_bia&&(g.resolve(),this.g_bgO.delete(e))}g_bic(e){e||(e=this.g_bgM);const g=this.g_bgO.get(e);return g?g.promise:Promise.resolve()}g_bid(){if(0<this.g_bgU.size)return void this.g_abK();for(const e of this.g_bgK)if(e.g_VM())return void this.g_abK()}g_Jj(){for(const e of this.g_bgU)e.g_Jj();const e=this.g_bht();for(const g of this.g_bgK)g.g_Jj(e);const g=this.g_bgK.filter(e=>e.g_VM()).map(e=>e.g_bie());this.g_bei("state",{tickCount:this.g_bgN,audioInstances:g,analysers:[...this.g_bgU].map(e=>e.g_bif())}),0===g.length&&0===this.g_bgU.size&&this.g_abv()}g_big(e,g){this.g_bei("trigger",{type:e,tag:g})}async g_bha(_){const n=_.originalUrl,t=_.url,b=_.type,a=_.isMusic,e=_.tag,o=_.isLooping,g=_.vol,r=_.pos,i=_.panning;let s=_.off;if(0<s&&!_.trueClock)if(this.g_bgE.getOutputTimestamp){const e=this.g_bgE.getOutputTimestamp();s=s-e.performanceTime/1e3+e.contextTime}else s=s-performance.now()/1e3+this.g_bgE.currentTime;this.g_bgM=e,this.g_bh$(e);try{this.g_bgL=await this.g_bhY(n,t,b,e,a),i?(this.g_bgL.g_bih(!0),this.g_bgL.g_bii(i.x,i.y,i.angle,i.innerAngle,i.outerAngle,i.outerGain),i.hasOwnProperty("uid")&&this.g_bgL.g_bij(i.uid)):this.g_bgL.g_bih(!1),this.g_bgL.g_KS(o,g,r,s)}catch(e){return void console.error("[Construct 3] Audio: error starting playback: ",e)}finally{this.g_bib(e)}this.g_abK()}g_bhb(e){const g=e.tag;for(const _ of this.g_bhD(g))_.g_Iz()}g_bhc(){for(const e of this.g_bgK)e.g_Iz()}g_bhd(e){const g=e.tag,_=e.paused;for(const n of this.g_bhD(g))_?n.g_bik():n.g_KR();this.g_bid()}g_bhe(e){const g=e.tag,_=e.vol;for(const n of this.g_bhD(g))n.g_aEe(_)}async g_bhf(g){const _=g.tag,n=g.vol,t=g.duration,b=g.stopOnEnd;await this.g_bic(_);for(const e of this.g_bhD(_))e.g_aEf(n,t,b);this.g_bid()}g_bhg(e){this.g_aDq=e.vol;for(const g of this.g_bgK)g.g_bil()}g_bhh(e){const g=e.tag,_=e.isMuted;for(const n of this.g_bhD(g))n.g_aEd(_)}g_bhi(e){this.g_aDr=e.isSilent,this.g_aov.g_aEl(this.g_aDr);for(const g of this.g_bgK)g.g_bim()}g_bhj(e){const g=e.tag,_=e.isLooping;for(const n of this.g_bhD(g))n.g_aEc(_)}g_bhk(e){const g=e.tag,_=e.rate;for(const n of this.g_bhD(g))n.g_Ke(_)}g_bhl(e){const g=e.tag,_=e.pos;for(const n of this.g_bhD(g))n.g_aEk(_)}async g_bhm(g){const _=g.originalUrl,n=g.url,t=g.type,b=g.isMusic;try{await this.g_bhY(_,n,t,"",b)}catch(e){console.error("[Construct 3] Audio: error preloading: ",e)}}async g_F_(g){const _=g.url,n=g.type,t=g.isMusic,b=await this.g_bhu("",_,n,t,!0);if(b){b.g_em();const e=this.g_bgJ.indexOf(b);-1!==e&&this.g_bgJ.splice(e,1)}}g_bhn(){for(const e of this.g_bgJ)e.g_em();this.g_bgJ.length=0}g_bho(e){const g=e.isSuspended;!g&&this.g_bgE.resume&&this.g_bgE.resume();for(const _ of this.g_bgK)_.g_api(g);g&&this.g_bgE.suspend&&this.g_bgE.suspend()}g_Ip(e){if(this.g_ahD=e.timeScale,this.g_anQ=e.gameTime,this.g_bgN=e.tickCount,0!==this.g_aDd)for(const e of this.g_bgK)e.g_bin();const g=e.listenerPos;g&&this.g_bgE.listener.setPosition(g[0],g[1],g[2]);for(const g of e.instPans){const e=g.uid;for(const _ of this.g_bgK)_.g_CJ()===e&&_.g_bio(g.x,g.y,g.angle)}}async g_bhp(g){const _=g.type,n=g.tag,t=g.params;let i;if("filter"===_)i=new g_bip(this,...t);else if("delay"===_)i=new g_biq(this,...t);else if("convolution"===_){let e=null;try{e=await this.g_bhu(g.bufferOriginalUrl,g.bufferUrl,g.bufferType,!1)}catch(e){return void console.log("[Construct 3] Audio: error loading convolution: ",e)}i=new g_bir(this,e.g_bis(),...t),i.g_bit(g.bufferOriginalUrl,g.bufferUrl,g.bufferType)}else if("flanger"===_)i=new g_biu(this,...t);else if("phaser"===_)i=new g_biv(this,...t);else if("gain"===_)i=new g_biw(this,...t);else if("tremolo"===_)i=new g_bix(this,...t);else if("ringmod"===_)i=new g_biy(this,...t);else if("distortion"===_)i=new g_biz(this,...t);else if("compressor"===_)i=new g_biA(this,...t);else if("analyser"===_)i=new g_biB(this,...t);else throw new Error("invalid effect type");this.g_bhz(n,i),this.g_biC()}g_bhq(_){const n=_.tag,t=_.index,b=_.param,i=_.value,e=_.ramp,a=_.time,g=this.g_bgT.get(n);!g||0>t||t>=g.length||(g[t].g_biD(b,i,e,a),this.g_biC())}g_bhr(e){const g=e.tag.toLowerCase(),_=this.g_bgT.get(g);if(_&&_.length){for(const e of _)e.g_em();this.g_bgT.delete(g),this.g_bhB(g)}}g_biE(e){this.g_bgU.add(e),this.g_bid()}g_biF(e){this.g_bgU.delete(e)}g_biC(){this.g_bgV||(this.g_bgV=!0,Promise.resolve().then(()=>this.g_biG()))}g_biG(){const e={};for(const[g,_]of this.g_bgT)e[g]=_.map(e=>e.g_bie());this.g_bei("fxstate",{fxstate:e}),this.g_bgV=!1}async g_bhs(e){const g=e.saveLoadMode;if(3!==g)for(const e of this.g_bgK)e.g_bhT()&&1===g||!e.g_bhT()&&2===g||e.g_Iz();for(const g of this.g_bgT.values())for(const e of g)e.g_em();this.g_bgT.clear(),this.g_ahD=e.timeScale,this.g_anQ=e.gameTime;const _=e.listenerPos;this.g_bgE.listener.setPosition(_[0],_[1],_[2]),this.g_aDr=e.isSilent,this.g_aov.g_aEl(this.g_aDr),this.g_aDq=e.masterVolume;const n=[];for(const g of Object.values(e.effects))n.push(Promise.all(g.map(e=>this.g_bhp(e))));await Promise.all(n),await Promise.all(e.playing.map(e=>this.g_biH(e,g))),this.g_bid()}async g_biH(_,n){if(3===n)return;const t=_.bufferOriginalUrl,b=_.bufferUrl,a=_.bufferType,e=_.isMusic,o=_.tag,g=_.isLooping,r=_.volume,i=_.playbackTime;if(e&&1===n)return;if(!e&&2===n)return;let s=null;try{s=await this.g_bhY(t,b,a,o,e)}catch(e){return void console.error("[Construct 3] Audio: error loading audio state: ",e)}s.g_biI(_.pan),s.g_KS(g,r,i,0),_.isPlaying||s.g_bik(),s.g_biJ(_)}g_bgY(e,g){this.g_bgX&&this.g_bgX.disconnect(),this.g_bgW=g.toLowerCase(),this.g_bgX=this.g_bgE.createMediaStreamSource(e),this.g_bgX.connect(this.g_bhx(this.g_bgW))}g_bg_(){return this.g_bgZ||(this.g_bgZ=this.g_bgE.createMediaStreamDestination(),this.g_bgF.connect(this.g_bgZ)),this.g_bgZ.stream}};g_beN.g_bfJ(g)}"use strict",self.g_bhX=class{constructor(g,_,n,t,b){this.g_biK=g,this.g_biL=_,this.g_Bd=n,this.g_ko=t,this.g_biM=b,this.g_biN="",this.g_biO="not-loaded",this.g_Bi=null}g_em(){this.g_biO="not-loaded",this.g_biK=null,this.g_Bi=null}static g_pB(g,_,n,t,b){const e="audio/webm; codecs=opus"===t&&!g.g_bhI();return b&&e&&g.g_bhJ(),!b||g.g_bhH()||e?new g_biP(g,_,n,t,b,e):new g_biQ(g,_,n,t,b)}g_adR(e){return"html5"===this.g_biN?new g_biR(this.g_biK,this,e):new g_biS(this.g_biK,this,e)}g_FU(){}g_AE(){return this.g_Bi||(this.g_Bi=this.g_FU()),this.g_Bi}g_Bj(){}g_biT(){}g_biU(){return"failed"===this.g_biO}g_bhv(){return this.g_biK.g_bhv()}g_biV(){return this.g_biN}g_biW(){return this.g_biL}g_bhW(){return this.g_Bd}g_biX(){return this.g_ko}g_bhT(){return this.g_biM}g_afz(){}},"use strict",self.g_biQ=class extends g_bhX{constructor(g,_,n,t,b){super(g,_,n,t,b),this.g_biN="html5",this.g_biY=new Audio,this.g_biY.crossOrigin="anonymous",this.g_biY.autoplay=!1,this.g_biY.preload="auto",this.g_biZ=null,this.g_bi_=null,this.g_bi$=!1,this.g_biY.addEventListener("canplaythrough",()=>this.g_bi$=!0),this.g_bja=this.g_bhv().createGain(),this.g_bjb=null,this.g_biY.addEventListener("canplay",()=>{this.g_biZ&&(this.g_biO="loaded",this.g_biZ(),this.g_biZ=null,this.g_bi_=null),this.g_bjb||!this.g_biY||(this.g_bjb=this.g_bhv().createMediaElementSource(this.g_biY),this.g_bjb.connect(this.g_bja))}),this.onended=null,this.g_biY.addEventListener("ended",()=>{this.onended&&this.onended()}),this.g_biY.addEventListener("error",e=>this.g_bjc(e))}g_em(){this.g_biK.g_bhQ(this),this.g_bja.disconnect(),this.g_bja=null,this.g_bjb.disconnect(),this.g_bjb=null,this.g_biY&&!this.g_biY.paused&&this.g_biY.pause(),this.onended=null,this.g_biY=null,super.g_em()}g_FU(){return this.g_biO="loading",new Promise((e,g)=>{this.g_biZ=e,this.g_bi_=g,this.g_biY.src=this.g_Bd})}g_bjc(e){console.error(`[Construct 3] Audio '${this.g_Bd}' error: `,e),this.g_bi_&&(this.g_biO="failed",this.g_bi_(e),this.g_biZ=null,this.g_bi_=null)}g_Bj(){const e=4<=this.g_biY.readyState;return e&&(this.g_bi$=!0),e||this.g_bi$}g_biT(){return this.g_Bj()}g_bjd(){return this.g_biY}g_bje(){return this.g_bja}g_afz(){return this.g_biY.duration}},"use strict",self.g_biP=class extends g_bhX{constructor(g,_,n,t,b,e){super(g,_,n,t,b),this.g_biN="webaudio",this.g_bjf=null,this.g_bjg=null,this.g_bjh=!!e}g_em(){this.g_biK.g_bhQ(this),this.g_bjf=null,this.g_bjg=null,super.g_em()}async g_bji(){if(this.g_bjf)return this.g_bjf;const e=this.g_biK.g_bes();if("cordova"===e.g_apV()&&e.g_fT(this.g_Bd))this.g_bjf=await e.g_As(this.g_Bd);else{const e=await fetch(this.g_Bd);if(!e.ok)throw new Error(`error fetching audio data: ${e.status} ${e.statusText}`);this.g_bjf=await e.arrayBuffer()}}async g_bjj(){return this.g_bjg?this.g_bjg:void(this.g_bjg=await this.g_biK.g_bhP(this.g_bjf,this.g_bjh),this.g_bjf=null)}async g_FU(){try{this.g_biO="loading",await this.g_bji(),await this.g_bjj(),this.g_biO="loaded"}catch(e){this.g_biO="failed",console.error(`[Construct 3] Failed to load audio '${this.g_Bd}': `,e)}}g_Bj(){return!!(this.g_bjf||this.g_bjg)}g_biT(){return!!this.g_bjg}g_bis(){return this.g_bjg}g_afz(){return this.g_bjg?this.g_bjg.duration:0}},"use strict";{function _(g){return g*e}const e=180/Math.PI;self.g_bjk=class{constructor(e,g,_){this.g_biK=e,this.g_vg=g,this.g_bjl=_,this.g_bjm=this.g_bhv().createGain(),this.g_bjm.connect(this.g_bhw()),this.g_bjn=null,this.g_bjo=!1,this.g_Sw=!0,this.g_aNZ=!1,this.g_bjp=!1,this.g_ZD=!1,this.g_bjq=1,this.g_bjr=!1,this.g_Jw=1;const n=this.g_biK.g_bhG();this.g_bjs=1===n&&!this.g_bhT()||2===n,this.g_bjt=-1,this.g_bju=-1,this.g_bjv=!1}g_em(){this.g_biK=null,this.g_vg=null,this.g_bjn&&(this.g_bjn.disconnect(),this.g_bjn=null),this.g_bjm.disconnect(),this.g_bjm=null}g_bhv(){return this.g_biK.g_bhv()}g_bhw(){return this.g_biK.g_bhx(this.g_bjl)}g_bhF(){return this.g_biK.g_bhF()}g_aN_(){return this.g_bjs?this.g_biK.g_EK():performance.now()/1e3}g_biW(){return this.g_vg.g_biW()}g_bhW(){return this.g_vg.g_bhW()}g_biX(){return this.g_vg.g_biX()}g_bhR(){return this.g_vg}g_bhT(){return this.g_vg.g_bhT()}g_bh_(e){this.g_bjl=e}g_bhU(){return this.g_bjl}g_bhV(){}g_bhZ(){}g_Kh(){return!this.g_Sw&&!this.g_aNZ&&!this.g_bhV()}g_VM(){return!this.g_Sw&&!this.g_bhV()}g_bjw(){}g_afz(e){let g=this.g_vg.g_afz();return e&&(g/=this.g_Jw||.001),g}g_KS(){}g_Iz(){}g_bik(){}g_aN$(){return this.g_aNZ}g_KR(){}g_aEe(e){this.g_bjq=e,this.g_bjm.gain.cancelScheduledValues(0),this.g_bju=-1,this.g_bjm.gain.value=this.g_bjx()}g_aEf(g,_,n){if(!this.g_bjy()){g*=this.g_bhF();const t=this.g_bjm.gain;t.cancelScheduledValues(0);const b=this.g_biK.g_bht(),e=b+_;t.setValueAtTime(this.g_bjx(),b),t.linearRampToValueAtTime(g,e),this.g_bjq=g,this.g_bju=e,this.g_bjv=n}}g_bil(){this.g_aEe(this.g_bjq)}g_Jj(e){-1!==this.g_bju&&e>=this.g_bju&&(this.g_bju=-1,this.g_bjv&&this.g_Iz(),this.g_biK.g_big("fade-ended",this.g_bjl))}g_bjx(){const e=this.g_bjq*this.g_bhF();return isFinite(e)?e:0}g_aEd(e){e=!!e,this.g_bjr===e||(this.g_bjr=e,this.g_bim())}g_bjy(){return this.g_bjr}g_aDW(){return this.g_biK.g_aDW()}g_bim(){}g_aEc(){}g_Xs(){return this.g_ZD}g_Ke(e){this.g_Jw===e||(this.g_Jw=e,this.g_bin())}g_bin(){}g_Kf(){return this.g_Jw}g_aEk(){}g_api(){}g_bih(e){e=!!e,this.g_bjo===e||(this.g_bjo=e,this.g_bjo?(!this.g_bjn&&(this.g_bjn=this.g_bhv().createPanner(),this.g_bjn.panningModel=this.g_biK.g_bhK(),this.g_bjn.distanceModel=this.g_biK.g_bhL(),this.g_bjn.refDistance=this.g_biK.g_bhM(),this.g_bjn.maxDistance=this.g_biK.g_bhN(),this.g_bjn.rolloffFactor=this.g_biK.g_bhO()),this.g_bjm.disconnect(),this.g_bjm.connect(this.g_bjn),this.g_bjn.connect(this.g_bhw())):(this.g_bjn.disconnect(),this.g_bjm.disconnect(),this.g_bjm.connect(this.g_bhw())))}g_bii(n,t,b,i,e,a){this.g_bjo&&(this.g_bio(n,t,b),this.g_bjn.coneInnerAngle=_(i),this.g_bjn.coneOuterAngle=_(e),this.g_bjn.coneOuterGain=a)}g_bio(e,g,_){this.g_bjo&&(this.g_bjn.setPosition(e,g,0),this.g_bjn.setOrientation(Math.cos(_),Math.sin(_),0))}g_bij(e){this.g_bjt=e}g_CJ(){return this.g_bjt}g_bjz(){}g_bhE(e){const g=this.g_bjn||this.g_bjm;g.disconnect(),g.connect(e)}g_bie(){return{tag:this.g_bjl,duration:this.g_afz(),volume:this.g_bjq,isPlaying:this.g_Kh(),playbackTime:this.g_bjw(),playbackRate:this.g_Kf(),uid:this.g_bjt,bufferOriginalUrl:this.g_biW(),bufferUrl:"",bufferType:this.g_biX(),isMusic:this.g_bhT(),isLooping:this.g_Xs(),isMuted:this.g_bjy(),resumePosition:this.g_bjz(),pan:this.g_bjA()}}g_biJ(e){this.g_Ke(e.playbackRate),this.g_aEd(e.isMuted)}g_bjA(){if(!this.g_bjn)return null;const e=this.g_bjn;return{pos:[e.positionX.value,e.positionY.value,e.positionZ.value],orient:[e.orientationX.value,e.orientationY.value,e.orientationZ.value],cia:e.coneInnerAngle,coa:e.coneOuterAngle,cog:e.coneOuterGain,uid:this.g_bjt}}g_biI(e){if(!e)return void this.g_bih(!1);this.g_bih(!0);const g=this.g_bjn;g.setPosition(...g.pos),g.setOrientation(...g.orient),g.coneInnerAngle=g.cia,g.coneOuterAngle=g.coa,g.coneOuterGain=g.cog,this.g_bjt=g.uid}}}"use strict",self.g_biR=class extends g_bjk{constructor(e,g,_){super(e,g,_),this.g_vg.g_bje().connect(this.g_bjm),this.g_vg.onended=()=>this.g_bjB()}g_em(){this.g_Iz(),this.g_vg.g_bje().disconnect(),super.g_em()}g_bjd(){return this.g_vg.g_bjd()}g_bjB(){this.g_Sw=!0,this.g_bjt=-1,this.g_biK.g_big("ended",this.g_bjl)}g_bhV(){return this.g_bjd().ended}g_bhZ(){return!!this.g_Sw||this.g_bhV()}g_bjw(e){let g=this.g_bjd().currentTime;return e&&(g*=this.g_Jw),this.g_ZD||(g=Math.min(g,this.g_afz())),g}g_KS(e,g,_){const n=this.g_bjd();if(1!==n.playbackRate&&(n.playbackRate=1),n.loop!==e&&(n.loop=e),this.g_aEe(g),n.muted&&(n.muted=!1),n.currentTime!==_)try{n.currentTime=_}catch(e){console.warn(`[Construct 3] Exception seeking audio '${this.g_vg.g_bhW()}' to position '${_}': `,e)}this.g_biK.g_bfM(n),this.g_Sw=!1,this.g_aNZ=!1,this.g_ZD=e,this.g_Jw=1}g_Iz(){const e=this.g_bjd();e.paused||e.pause(),this.g_biK.g_bfN(e),this.g_Sw=!0,this.g_aNZ=!1,this.g_bjt=-1}g_bik(){if(!(this.g_aNZ||this.g_Sw||this.g_bhV())){const e=this.g_bjd();e.paused||e.pause(),this.g_biK.g_bfN(e),this.g_aNZ=!0}}g_KR(){!this.g_aNZ||this.g_Sw||this.g_bhV()||(this.g_biK.g_bfM(this.g_bjd()),this.g_aNZ=!1)}g_bim(){this.g_bjd().muted=this.g_bjr||this.g_aDW()}g_aEc(e){e=!!e,this.g_ZD===e||(this.g_ZD=e,this.g_bjd().loop=e)}g_bin(){let e=this.g_Jw;this.g_bjs&&(e*=this.g_biK.g_Jh());try{this.g_bjd().playbackRate=e}catch(g){console.warn(`[Construct 3] Unable to set playback rate '${e}':`,g)}}g_aEk(e){if(!(this.g_Sw||this.g_bhV()))try{this.g_bjd().currentTime=e}catch(g){console.warn(`[Construct 3] Error seeking audio to '${e}': `,g)}}g_bjz(){return this.g_bjw()}g_api(e){e?this.g_Kh()?(this.g_bjd().pause(),this.g_bjp=!0):this.g_bjp=!1:this.g_bjp&&(this.g_biK.g_bfM(this.g_bjd()),this.g_bjp=!1)}},"use strict",self.g_biS=class extends g_bjk{constructor(e,g,_){super(e,g,_),this.g_bjC=null,this.g_bjD=e=>this.g_bjB(e),this.g_bjE=!0,this.g_bjF=null,this.g_anL=0,this.g_bjG=0,this.g_bjH=1}g_em(){this.g_Iz(),this.g_bjI(),this.g_bjD=null,super.g_em()}g_bjI(){this.g_bjC&&this.g_bjC.disconnect(),this.g_bjC=null,this.g_bjF=null}g_bjB(e){this.g_aNZ||this.g_bjp||e.target!==this.g_bjF||(this.g_bjE=!0,this.g_Sw=!0,this.g_bjt=-1,this.g_bjI(),this.g_biK.g_big("ended",this.g_bjl))}g_bhV(){return!(!this.g_Sw&&this.g_bjC&&this.g_bjC.loop)&&!this.g_aNZ&&this.g_bjE}g_bhZ(){return!this.g_bjC||this.g_Sw||this.g_bhV()}g_bjw(e){let g=0;return g=this.g_aNZ?this.g_bjG:this.g_aN_()-this.g_anL,e&&(g*=this.g_Jw),this.g_ZD||(g=Math.min(g,this.g_afz())),g}g_KS(e,g,_,n){this.g_bjH=1,this.g_aEe(g),this.g_bjI(),this.g_bjC=this.g_bhv().createBufferSource(),this.g_bjC.buffer=this.g_vg.g_bis(),this.g_bjC.connect(this.g_bjm),this.g_bjF=this.g_bjC,this.g_bjC.onended=this.g_bjD,this.g_bjC.loop=e,this.g_bjC.start(n,_),this.g_bjE=!1,this.g_Sw=!1,this.g_aNZ=!1,this.g_ZD=e,this.g_Jw=1,this.g_anL=this.g_aN_()-_}g_Iz(){this.g_bjC&&this.g_bjC.stop(0),this.g_Sw=!0,this.g_aNZ=!1,this.g_bjt=-1}g_bik(){this.g_aNZ||this.g_Sw||this.g_bhV()||(this.g_bjG=this.g_bjw(!0),this.g_ZD&&(this.g_bjG%=this.g_afz()),this.g_aNZ=!0,this.g_bjC.stop(0))}g_KR(){!this.g_aNZ||this.g_Sw||this.g_bhV()||(this.g_bjI(),this.g_bjC=this.g_bhv().createBufferSource(),this.g_bjC.buffer=this.g_vg.g_bis(),this.g_bjC.connect(this.g_bjm),this.g_bjF=this.g_bjC,this.g_bjC.onended=this.g_bjD,this.g_bjC.loop=this.g_ZD,this.g_bil(),this.g_bin(),this.g_anL=this.g_aN_()-this.g_bjG/(this.g_Jw||.001),this.g_bjC.start(0,this.g_bjG),this.g_aNZ=!1)}g_bjx(){return super.g_bjx()*this.g_bjH}g_bim(){this.g_bjH=this.g_bjr||this.g_aDW()?0:1,this.g_bil()}g_aEc(e){e=!!e,this.g_ZD===e||(this.g_ZD=e,this.g_bjC&&(this.g_bjC.loop=e))}g_bin(){let e=this.g_Jw;this.g_bjs&&(e*=this.g_biK.g_Jh()),this.g_bjC&&(this.g_bjC.playbackRate.value=e)}g_aEk(e){this.g_Sw||this.g_bhV()||(this.g_aNZ?this.g_bjG=e:(this.g_bik(),this.g_bjG=e,this.g_KR()))}g_bjz(){return this.g_bjG}g_api(e){e?this.g_Kh()?(this.g_bjp=!0,this.g_bjG=this.g_bjw(!0),this.g_ZD&&(this.g_bjG%=this.g_afz()),this.g_bjC.stop(0)):this.g_bjp=!1:this.g_bjp&&(this.g_bjI(),this.g_bjC=this.g_bhv().createBufferSource(),this.g_bjC.buffer=this.g_vg.g_bis(),this.g_bjC.connect(this.g_bjm),this.g_bjF=this.g_bjC,this.g_bjC.onended=this.g_bjD,this.g_bjC.loop=this.g_ZD,this.g_bil(),this.g_bin(),this.g_anL=this.g_aN_()-this.g_bjG/(this.g_Jw||.001),this.g_bjC.start(0,this.g_bjG),this.g_bjp=!1)}g_biJ(e){super.g_biJ(e),this.g_bjG=e.resumePosition}},"use strict";{function g(e){return Math.pow(10,e/20)}function _(e){return Math.max(Math.min(g(e),1),0)}function n(e){return 20*(Math.log(e)/2.302585092994046)}function t(e){return n(Math.max(Math.min(e,1),0))}function i(e,g){return 1-Math.exp(-g*e)}class e{constructor(e){this.g_biK=e,this.g_bgE=e.g_bhv(),this.g_BS=-1,this.g_bjl="",this.g_ko="",this.g_bjJ=null}g_em(){this.g_bgE=null}g_ajk(e){this.g_BS=e}g_Dl(){return this.g_BS}g_bhA(e){this.g_bjl=e}g_bhU(){return this.g_bjl}g_bjK(){return this.g_bgE.createGain()}g_bhy(){}g_bhC(){}g_bjL(g,_,n,t){if(g.cancelScheduledValues(0),0===t)return void(g.value=_);const b=this.g_bgE.currentTime;t+=b,0===n?g.setValueAtTime(_,t):1===n?(g.setValueAtTime(g.value,b),g.linearRampToValueAtTime(_,t)):2===n?(g.setValueAtTime(g.value,b),g.exponentialRampToValueAtTime(_,t)):void 0}g_bie(){return{type:this.g_ko,tag:this.g_bjl,params:this.g_bjJ}}}self.g_bip=class extends e{constructor(_,n,t,b,i,e,a){super(_),this.g_ko="filter",this.g_bjJ=[n,t,b,i,e,a],this.g_bjM=this.g_bjK(),this.g_bjN=this.g_bjK(),this.g_bjN.gain.value=a,this.g_bjO=this.g_bjK(),this.g_bjO.gain.value=1-a,this.g_bjP=this.g_bgE.createBiquadFilter(),this.g_bjP.type=n,this.g_bjP.frequency.value=t,this.g_bjP.detune.value=b,this.g_bjP.Q.value=i,this.g_bjP.gain.vlaue=e,this.g_bjM.connect(this.g_bjP),this.g_bjM.connect(this.g_bjO),this.g_bjP.connect(this.g_bjN)}g_em(){this.g_bjM.disconnect(),this.g_bjP.disconnect(),this.g_bjN.disconnect(),this.g_bjO.disconnect(),super.g_em()}g_bhC(e){this.g_bjN.disconnect(),this.g_bjN.connect(e),this.g_bjO.disconnect(),this.g_bjO.connect(e)}g_bhy(){return this.g_bjM}g_biD(e,g,_,n){0===e?(g=Math.max(Math.min(g/100,1),0),this.g_bjJ[5]=g,this.g_bjL(this.g_bjN.gain,g,_,n),this.g_bjL(this.g_bjO.gain,1-g,_,n)):1===e?(this.g_bjJ[1]=g,this.g_bjL(this.g_bjP.frequency,g,_,n)):2===e?(this.g_bjJ[2]=g,this.g_bjL(this.g_bjP.detune,g,_,n)):3===e?(this.g_bjJ[3]=g,this.g_bjL(this.g_bjP.Q,g,_,n)):4===e?(this.g_bjJ[4]=g,this.g_bjL(this.g_bjP.gain,g,_,n)):void 0}},self.g_biq=class extends e{constructor(e,g,_,n){super(e),this.g_ko="delay",this.g_bjJ=[g,_,n],this.g_bjM=this.g_bjK(),this.g_bjN=this.g_bjK(),this.g_bjN.gain.value=n,this.g_bjO=this.g_bjK(),this.g_bjO.gain.value=1-n,this.g_bjQ=this.g_bjK(),this.g_bjR=this.g_bgE.createDelay(g),this.g_bjR.delayTime.value=g,this.g_bjS=this.g_bjK(),this.g_bjS.gain.value=_,this.g_bjM.connect(this.g_bjQ),this.g_bjM.connect(this.g_bjO),this.g_bjQ.connect(this.g_bjN),this.g_bjQ.connect(this.g_bjR),this.g_bjR.connect(this.g_bjS),this.g_bjS.connect(this.g_bjQ)}g_em(){this.g_bjM.disconnect(),this.g_bjN.disconnect(),this.g_bjO.disconnect(),this.g_bjQ.disconnect(),this.g_bjR.disconnect(),this.g_bjS.disconnect(),super.g_em()}g_bhC(e){this.g_bjN.disconnect(),this.g_bjN.connect(e),this.g_bjO.disconnect(),this.g_bjO.connect(e)}g_bhy(){return this.g_bjM}g_biD(g,n,t,b){0===g?(n=Math.max(Math.min(n/100,1),0),this.g_bjJ[2]=n,this.g_bjL(this.g_bjN.gain,n,t,b),this.g_bjL(this.g_bjO.gain,1-n,t,b)):4===g?(this.g_bjJ[1]=_(n),this.g_bjL(this.g_bjS.gain,_(n),t,b)):5===g?(this.g_bjJ[0]=n,this.g_bjL(this.g_bjR.delayTime,n,t,b)):void 0}},self.g_bir=class extends e{constructor(e,g,_,n){super(e),this.g_ko="convolution",this.g_bjJ=[_,n],this.g_bjT="",this.g_bjU="",this.g_bjV="",this.g_bjM=this.g_bjK(),this.g_bjN=this.g_bjK(),this.g_bjN.gain.value=n,this.g_bjO=this.g_bjK(),this.g_bjO.gain.value=1-n,this.g_bjW=this.g_bgE.createConvolver(),this.g_bjW.normalize=_,this.g_bjW.buffer=g,this.g_bjM.connect(this.g_bjW),this.g_bjM.connect(this.g_bjO),this.g_bjW.connect(this.g_bjN)}g_em(){this.g_bjM.disconnect(),this.g_bjW.disconnect(),this.g_bjN.disconnect(),this.g_bjO.disconnect(),super.g_em()}g_bhC(e){this.g_bjN.disconnect(),this.g_bjN.connect(e),this.g_bjO.disconnect(),this.g_bjO.connect(e)}g_bhy(){return this.g_bjM}g_biD(e,g,_,n){0===e?(g=Math.max(Math.min(g/100,1),0),this.g_bjJ[1]=g,this.g_bjL(this.g_bjN.gain,g,_,n),this.g_bjL(this.g_bjO.gain,1-g,_,n)):void 0}g_bit(e,g,_){this.g_bjT=e,this.g_bjU=g,this.g_bjV=_}g_bie(){const e=super.g_bie();return e.bufferOriginalUrl=this.g_bjT,e.bufferUrl="",e.bufferType=this.g_bjV,e}},self.g_biu=class extends e{constructor(g,_,n,t,b,e){super(g),this.g_ko="flanger",this.g_bjJ=[_,n,t,b,e],this.g_bjM=this.g_bjK(),this.g_bjO=this.g_bjK(),this.g_bjO.gain.value=1-e/2,this.g_bjN=this.g_bjK(),this.g_bjN.gain.value=e/2,this.g_bjX=this.g_bjK(),this.g_bjX.gain.value=b,this.g_bjR=this.g_bgE.createDelay(_+n),this.g_bjR.delayTime.value=_,this.g_bjY=this.g_bgE.createOscillator(),this.g_bjY.frequency.value=t,this.g_bjZ=this.g_bjK(),this.g_bjZ.gain.value=n,this.g_bjM.connect(this.g_bjR),this.g_bjM.connect(this.g_bjO),this.g_bjR.connect(this.g_bjN),this.g_bjR.connect(this.g_bjX),this.g_bjX.connect(this.g_bjR),this.g_bjY.connect(this.g_bjZ),this.g_bjZ.connect(this.g_bjR.delayTime),this.g_bjY.start(0)}g_em(){this.g_bjY.stop(0),this.g_bjM.disconnect(),this.g_bjR.disconnect(),this.g_bjY.disconnect(),this.g_bjZ.disconnect(),this.g_bjO.disconnect(),this.g_bjN.disconnect(),this.g_bjX.disconnect(),super.g_em()}g_bhC(e){this.g_bjN.disconnect(),this.g_bjN.connect(e),this.g_bjO.disconnect(),this.g_bjO.connect(e)}g_bhy(){return this.g_bjM}g_biD(e,g,_,n){0===e?(g=Math.max(Math.min(g/100,1),0),this.g_bjJ[4]=g,this.g_bjL(this.g_bjN.gain,g/2,_,n),this.g_bjL(this.g_bjO.gain,1-g/2,_,n)):6===e?(this.g_bjJ[1]=g/1e3,this.g_bjL(this.g_bjZ.gain,g/1e3,_,n)):7===e?(this.g_bjJ[2]=g,this.g_bjL(this.g_bjY.frequency,g,_,n)):8===e?(this.g_bjJ[3]=g/100,this.g_bjL(this.g_bjX.gain,g/100,_,n)):void 0}},self.g_biv=class extends e{constructor(_,n,t,b,i,e,a){super(_),this.g_ko="phaser",this.g_bjJ=[n,t,b,i,e,a],this.g_bjM=this.g_bjK(),this.g_bjO=this.g_bjK(),this.g_bjO.gain.value=1-a/2,this.g_bjN=this.g_bjK(),this.g_bjN.gain.value=a/2,this.g_bjP=this.g_bgE.createBiquadFilter(),this.g_bjP.type="allpass",this.g_bjP.frequency.value=n,this.g_bjP.detune.value=t,this.g_bjP.Q.value=b,this.g_bjY=this.g_bgE.createOscillator(),this.g_bjY.frequency.value=e,this.g_bjZ=this.g_bjK(),this.g_bjZ.gain.value=i,this.g_bjM.connect(this.g_bjP),this.g_bjM.connect(this.g_bjO),this.g_bjP.connect(this.g_bjN),this.g_bjY.connect(this.g_bjZ),this.g_bjZ.connect(this.g_bjP.frequency),this.g_bjY.start(0)}g_em(){this.g_bjY.stop(0),this.g_bjM.disconnect(),this.g_bjP.disconnect(),this.g_bjY.disconnect(),this.g_bjZ.disconnect(),this.g_bjO.disconnect(),this.g_bjN.disconnect(),super.g_em()}g_bhC(e){this.g_bjN.disconnect(),this.g_bjN.connect(e),this.g_bjO.disconnect(),this.g_bjO.connect(e)}g_bhy(){return this.g_bjM}g_biD(e,g,_,n){0===e?(g=Math.max(Math.min(g/100,1),0),this.g_bjJ[5]=g,this.g_bjL(this.g_bjN.gain,g/2,_,n),this.g_bjL(this.g_bjO.gain,1-g/2,_,n)):1===e?(this.g_bjJ[0]=g,this.g_bjL(this.g_bjP.frequency,g,_,n)):2===e?(this.g_bjJ[1]=g,this.g_bjL(this.g_bjP.detune,g,_,n)):3===e?(this.g_bjJ[2]=g,this.g_bjL(this.g_bjP.Q,g,_,n)):6===e?(this.g_bjJ[3]=g,this.g_bjL(this.g_bjZ.gain,g,_,n)):7===e?(this.g_bjJ[4]=g,this.g_bjL(this.g_bjY.frequency,g,_,n)):void 0}},self.g_biw=class extends e{constructor(e,g){super(e),this.g_ko="gain",this.g_bjJ=[g],this.g_bj_=this.g_bjK(),this.g_bj_.gain.value=g}g_em(){this.g_bj_.disconnect(),super.g_em()}g_bhC(e){this.g_bj_.disconnect(),this.g_bj_.connect(e)}g_bhy(){return this.g_bj_}g_biD(g,n,t,b){4===g?(this.g_bjJ[0]=_(n),this.g_bjL(this.g_bj_.gain,_(n),t,b)):void 0}},self.g_bix=class extends e{constructor(e,g,_){super(e),this.g_ko="tremolo",this.g_bjJ=[g,_],this.g_bj_=this.g_bjK(),this.g_bj_.gain.value=1-_/2,this.g_bjY=this.g_bgE.createOscillator(),this.g_bjY.frequency.value=g,this.g_bjZ=this.g_bjK(),this.g_bjZ.gain.value=_/2,this.g_bjY.connect(this.g_bjZ),this.g_bjZ.connect(this.g_bj_.gain),this.g_bjY.start(0)}g_em(){this.g_bjY.stop(0),this.g_bjY.disconnect(),this.g_bjZ.disconnect(),this.g_bj_.disconnect(),super.g_em()}g_bhC(e){this.g_bj_.disconnect(),this.g_bj_.connect(e)}g_bhy(){return this.g_bj_}g_biD(e,g,_,n){0===e?(g=Math.max(Math.min(g/100,1),0),this.g_bjJ[1]=g,this.g_bjL(this.g_bj_.gain.value,1-g/2,_,n),this.g_bjL(this.g_bjZ.gain.value,g/2,_,n)):7===e?(this.g_bjJ[0]=g,this.g_bjL(this.g_bjY.frequency,g,_,n)):void 0}},self.g_biy=class extends e{constructor(e,g,_){super(e),this.g_ko="ringmod",this.g_bjJ=[g,_],this.g_bjM=this.g_bjK(),this.g_bjN=this.g_bjK(),this.g_bjN.gain.value=_,this.g_bjO=this.g_bjK(),this.g_bjO.gain.value=1-_,this.g_bj$=this.g_bjK(),this.g_bj$.gain.value=0,this.g_bjY=this.g_bgE.createOscillator(),this.g_bjY.frequency.value=g,this.g_bjY.connect(this.g_bj$.gain),this.g_bjY.start(0),this.g_bjM.connect(this.g_bj$),this.g_bjM.connect(this.g_bjO),this.g_bj$.connect(this.g_bjN)}g_em(){this.g_bjY.stop(0),this.g_bjY.disconnect(),this.g_bj$.disconnect(),this.g_bjM.disconnect(),this.g_bjN.disconnect(),this.g_bjO.disconnect(),super.g_em()}g_bhC(e){this.g_bjN.disconnect(),this.g_bjN.connect(e),this.g_bjO.disconnect(),this.g_bjO.connect(e)}g_bhy(){return this.g_bjM}g_biD(e,g,_,n){0===e?(g=Math.max(Math.min(g/100,1),0),this.g_bjJ[1]=g,this.g_bjL(this.g_bjN.gain,g,_,n),this.g_bjL(this.g_bjO.gain,1-g,_,n)):7===e?(this.g_bjJ[0]=g,this.g_bjL(this.g_bjY.frequency,g,_,n)):void 0}},self.g_biz=class extends e{constructor(g,_,n,t,b,e){super(g),this.g_ko="distortion",this.g_bjJ=[_,n,t,b,e],this.g_bjM=this.g_bjK(),this.g_bka=this.g_bjK(),this.g_bkb=this.g_bjK(),this.g_bkc(t,b),this.g_bjN=this.g_bjK(),this.g_bjN.gain.value=e,this.g_bjO=this.g_bjK(),this.g_bjO.gain.value=1-e,this.g_bkd=this.g_bgE.createWaveShaper(),this.g_bke=new Float32Array(65536),this.g_bkf(_,n),this.g_bkd.curve=this.g_bke,this.g_bjM.connect(this.g_bka),this.g_bjM.connect(this.g_bjO),this.g_bka.connect(this.g_bkd),this.g_bkd.connect(this.g_bkb),this.g_bkb.connect(this.g_bjN)}g_em(){this.g_bjM.disconnect(),this.g_bka.disconnect(),this.g_bkd.disconnect(),this.g_bkb.disconnect(),this.g_bjN.disconnect(),this.g_bjO.disconnect(),super.g_em()}g_bkc(e,g){.01>e&&(e=.01),this.g_bka.gain.value=e,this.g_bkb.gain.value=Math.pow(1/e,.6)*g}g_bkf(e,g){for(let _,n=0;32768>n;++n)_=n/32768,_=this.g_bkg(_,e,g),this.g_bke[32768+n]=_,this.g_bke[32768-n-1]=-_}g_bkg(e,_,n){const t=1.05*n*_-_,b=0>e?-1:1,a=0>e?-e:e;let g=a<_?a:_+t*i(a-_,1/t);return g*=b,g}g_bhC(e){this.g_bjN.disconnect(),this.g_bjN.connect(e),this.g_bjO.disconnect(),this.g_bjO.connect(e)}g_bhy(){return this.g_bjM}g_biD(e,g,_,n){0===e?(g=Math.max(Math.min(g/100,1),0),this.g_bjJ[4]=g,this.g_bjL(this.g_bjN.gain,g,_,n),this.g_bjL(this.g_bjO.gain,1-g,_,n)):void 0}},self.g_biA=class extends e{constructor(g,_,n,t,b,e){super(g),this.g_ko="compressor",this.g_bjJ=[_,n,t,b,e],this.g_bj_=this.g_bgE.createDynamicsCompressor(),this.g_bj_.threshold.value=_,this.g_bj_.knee.value=n,this.g_bj_.ratio.value=t,this.g_bj_.attack.value=b,this.g_bj_.release.value=e}g_em(){this.g_bj_.disconnect(),super.g_em()}g_bhC(e){this.g_bj_.disconnect(),this.g_bj_.connect(e)}g_bhy(){return this.g_bj_}g_biD(){}},self.g_biB=class extends e{constructor(e,g,_){super(e),this.g_ko="analyser",this.g_bjJ=[g,_],this.g_bj_=this.g_bgE.createAnalyser(),this.g_bj_.fftSize=g,this.g_bj_.smoothingTimeConstant=_,this.g_bkh=new Float32Array(this.g_bj_.frequencyBinCount),this.g_bki=new Uint8Array(g),this.g_bkj=0,this.g_bkk=0,this.g_biK.g_biE(this)}g_em(){this.g_biK.g_biF(this),this.g_bj_.disconnect(),super.g_em()}g_Jj(){this.g_bj_.getFloatFrequencyData(this.g_bkh),this.g_bj_.getByteTimeDomainData(this.g_bki);const e=this.g_bj_.fftSize;this.g_bkj=0;let g=0;for(let _,n=0;n<e;++n)_=(this.g_bki[n]-128)/128,0>_&&(_=-_),this.g_bkj<_&&(this.g_bkj=_),g+=_*_;this.g_bkj=t(this.g_bkj),this.g_bkk=t(Math.sqrt(g/e))}g_bhC(e){this.g_bj_.disconnect(),this.g_bj_.connect(e)}g_bhy(){return this.g_bj_}g_biD(){}g_bif(){return{tag:this.g_bhU(),index:this.g_Dl(),peak:this.g_bkj,rms:this.g_bkk,binCount:this.g_bj_.frequencyBinCount,freqBins:this.g_bkh}}}}{const e=class extends g_bee{constructor(e){super(e,"browser"),this.g_amE="",this.g_bep("get-initial-state",e=>this.g_bkl(e)),this.g_bep("ready-for-sw-messages",()=>this.g_bkm()),this.g_bep("alert",e=>this.g_bkn(e)),this.g_bep("close",()=>this.g_bko()),this.g_bep("set-focus",e=>this.g_beD(e)),this.g_bep("vibrate",e=>this.g_bkp(e)),this.g_bep("lock-orientation",e=>this.g_bkq(e)),this.g_bep("unlock-orientation",()=>this.g_bkr()),this.g_bep("navigate",e=>this.g_bks(e)),this.g_bep("request-fullscreen",e=>this.g_bkt(e)),this.g_bep("exit-fullscreen",()=>this.g_bku()),window.addEventListener("online",()=>this.g_aFb(!0)),window.addEventListener("offline",()=>this.g_aFb(!1)),document.addEventListener("backbutton",()=>this.g_bkv()),"undefined"!=typeof Windows&&Windows.UI.Core.SystemNavigationManager.getForCurrentView().addEventListener("backrequested",e=>this.g_bkw(e))}g_bkl(e){return this.g_amE=e.exportType,{location:location.toString(),isOnline:!!navigator.onLine,referrer:document.referrer,title:document.title,isCookieEnabled:!!navigator.cookieEnabled,screenWidth:screen.width,screenHeight:screen.height,windowOuterWidth:window.outerWidth,windowOuterHeight:window.outerHeight,isScirraArcade:"undefined"!=typeof window.is_scirra_arcade}}g_bkm(){window.C3_RegisterSW&&window.OfflineClientInfo&&window.OfflineClientInfo.SetMessageCallback(e=>this.g_bei("sw-message",e.data))}g_aFb(e){this.g_bei("online-state",{isOnline:e})}g_bkv(){this.g_bei("backbutton")}g_bkw(e){e.handled=!0,this.g_bei("backbutton")}g_bkx(){return"nwjs"===this.g_amE?nw.Window.get():null}g_bkn(e){alert(e.message)}g_bko(){navigator.app&&navigator.app.exitApp?navigator.app.exitApp():navigator.device&&navigator.device.exitApp?navigator.device.exitApp():window.close()}g_beD(e){const g=e.isFocus;if("nwjs"===this.g_amE){const e=this.g_bkx();g?e.focus():e.blur()}else g?window.focus():window.blur()}g_bkp(e){navigator.vibrate&&navigator.vibrate(e.pattern)}g_bkq(e){const g=e.orientation;if(screen.orientation&&screen.orientation.lock)screen.orientation.lock(g).catch(e=>console.warn("[Construct 3] Failed to lock orientation: ",e));else try{let e=!1;screen.lockOrientation?e=screen.lockOrientation(g):screen.webkitLockOrientation?e=screen.webkitLockOrientation(g):screen.mozLockOrientation?e=screen.mozLockOrientation(g):screen.msLockOrientation&&(e=screen.msLockOrientation(g)),e||console.warn("[Construct 3] Failed to lock orientation")}catch(e){console.warn("[Construct 3] Failed to lock orientation: ",e)}}g_bkr(){try{screen.orientation&&screen.orientation.unlock?screen.orientation.unlock():screen.unlockOrientation?screen.unlockOrientation():screen.webkitUnlockOrientation?screen.webkitUnlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()}catch(e){}}g_bks(e){const g=e.type;if("back"===g)navigator.app&&navigator.app.backHistory?navigator.app.backHistory():window.back();else if("forward"===g)window.forward();else if("home"===g)window.g_bky();else if("reload"===g)location.reload();else if("url"===g){const g=e.url,_=e.target,n=e.exportType;"windows-uwp"===n&&"undefined"!=typeof Windows?Windows.System.Launcher.launchUriAsync(new Windows.Foundation.Uri(g)):navigator.app&&navigator.app.loadUrl?navigator.app.loadUrl(g,{openExternal:!0}):"cordova"===n?window.open(g,"_system"):"preview"===n?window.open(g,"_blank"):!this.g_aFa&&(2===_?window.top.location=g:1===_?window.parent.location=g:window.location=g)}else if("new-window"===g){const g=e.url,_=e.tag,n=e.exportType;"windows-uwp"===n&&"undefined"!=typeof Windows?Windows.System.Launcher.launchUriAsync(new Windows.Foundation.Uri(g)):navigator.app&&navigator.app.loadUrl?navigator.app.loadUrl(g,{openExternal:!0}):"cordova"===n?window.open(g,"_system"):window.open(g,_)}}g_bkt(e){const g={navigationUI:"auto"},_=e.navUI;1===_?g.navigationUI="hide":2===_&&(g.navigationUI="show");const n=document.documentElement;n.requestFullscreen?n.requestFullscreen(g):n.mozRequestFullScreen?n.mozRequestFullScreen(g):n.msRequestFullscreen?n.msRequestFullscreen(g):n.webkitRequestFullScreen&&("undefined"==typeof Element.ALLOW_KEYBOARD_INPUT?n.webkitRequestFullScreen():n.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT))}g_bku(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()}};g_beN.g_bfJ(e)}{const e=class extends g_bee{constructor(e){super(e,"touch"),this.g_bep("request-permission",e=>this.g_bkz(e))}async g_bkz(e){const g=e.type;let _=!0;0===g?_=await this.g_bkA():1===g&&(_=await this.g_bkB()),this.g_bei("permission-result",{type:g,result:_})}async g_bkA(){if(!self.DeviceOrientationEvent||!self.DeviceOrientationEvent.requestPermission)return!0;try{const e=await self.DeviceOrientationEvent.requestPermission();return"granted"===e}catch(e){return console.warn("[Touch] Failed to request orientation permission: ",e),!1}}async g_bkB(){if(!self.DeviceMotionEvent||!self.DeviceMotionEvent.requestPermission)return!0;try{const e=await self.DeviceMotionEvent.requestPermission();return"granted"===e}catch(e){return console.warn("[Touch] Failed to request motion permission: ",e),!1}}};g_beN.g_bfJ(e)}{const e=class extends g_bee{constructor(e){super(e,"mouse"),this.g_bep("cursor",e=>this.g_bkC(e))}g_bkC(e){document.body.style.cursor=e}};g_beN.g_bfJ(e)}