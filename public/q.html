<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">   
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9624515888311250"
     crossorigin="anonymous"></script> 
    <link rel="stylesheet" href="./data/css/q.css">
    <link rel="icon" href="https://assets.clever.com/launchpad/cbef13596/favicon.ico">
    <link rel="shortcut icon" href="https://assets.clever.com/launchpad/cbef13596/favicon.ico">

    <title>Clever | Portal</title>

    <!-- uv vvv -->
    <script src="/uv/uv.bundle.js"></script>
    <script src="/uv/uv.config.js"></script>
    <!-- dynamic (you never know) -->
    <script src="/dynamic/dynamic.worker.js"></script>
    <script src="/dynamic/dynamic.config.js"></script>
    <!-- eruda -->
    <script src="./data/js/eruda.js"></script>
</head>
<body>
    <div class="top-spot">
        <div class="top-spot-enclosure">
            <a onclick="window.location.href = '/'">
                <div class="buttin"><img id="svgg" style="width: 35px;" src="/data/images/svg/home.svg"></div>
            </a>
            <a onclick="bFram()">
                <div class="buttin"><img id="svgg" style="margin-top: 4px;" src="/data/images/svg/left.svg"></div>
            </a>
            <a onclick="rFram()">
                <div class="buttin"><img id="svgg" style="width: 36px;" src="/data/images/svg/reload.svg"></div>
            </a>
            <a onclick="fFram()">
                <div class="buttin"><img id="svgg" style="margin-top: 4px;" src="/data/images/svg/right.svg"></div>
            </a>
            <div class="slashapp" autocomplete="off" style="width: 500px; position: relative; margin-right:10px; margin-top: 7px; border-radius: 10px;">
                <form id="uv-form">
                    <input placeholder="type as you must" id="uv-address" style="max-height: 10px; padding: 10px; letter-spacing: 1px;" class="slashapp_" type="text">
                </form>
                <div id="suggestions-box"></div>
            </div>
            <a onclick="fsFram()">
                <div class="buttin"><img id="svgg" style="margin-top: 4px;" src="/data/images/svg/fullscreen.svg"></div>
            </a>
            <a onclick="window.open(document.getElementById('fram').src, '_blank')">
                <div class="buttin"><img style="margin-top: 4px;" src="/data/images/svg/idk.png"></div>
            </a>
            <a onclick="consol()">
              <div class="buttin"><img id="svgg" style="margin-top: 4px;" src="/data/images/svg/inspect.svg"></div>
          </a>
          <a onclick="toggleDropdown()">
            <div class="buttin"><img style="margin-top: 4px;" src="./data/images/star.png"></div>
        </a>
            <button id="add-bookmark">+</button>
            <input type="text" id="bookmark-name" placeholder="Bookmark Name" />
            <ul id="bookmark-list"></ul>
  
          <div class="dropdown">
              <div class="dropdown-content" id="dropdownContent">
                  <p>Dropdown Item 1</p>
                  <p>Dropdown Item 2</p>
                  <p>Dropdown Item 3</p>
              </div>
          </div>
          <div id="search-history-container">
            <h4>Search History</h4>
            <ul id="search-history-list">
                <!-- List items will be dynamically added here -->
            </ul>
            <button id="clear-history-btn">Clear History</button>
        </div>
        </div>
        <div class="buttin" id="toggleTopBar">
            <img src="/data/images/svg/collapse.svg" style="width: 26px;" id="toggleIcon">
        </div>
        <div id="suggestions-box"></div>
    </div>
      
    <iframe src="null" id="fram"></iframe>

    <!-- history section -->
    
    
    <!-- JavaScript to toggle dropdown -->
    <script>
        function toggleDropdown() {
            const add = document.getElementById("add-bookmark");
            const name = document.getElementById("bookmark-name");
            if (add.style.display === "inline-block") {
                add.style.display = "none";
            } else {
                add.style.display = "inline-block";
            }
            if (name.style.display === "inline-block") {
                name.style.display = "none";
            } else {
                name.style.display = "inline-block";
            }
        }
    </script>
  
    <script>
        function toggleTopBar() {
            const topSpot = document.querySelector('.top-spot');
            const toggleIcon = document.getElementById('toggleIcon');
        
            const currentHeight = window.getComputedStyle(topSpot).height;

            if (currentHeight === '2.5vh' || topSpot.style.height === '2.5vh') {
                console.log('if');
                topSpot.style.height = '0vh';
                toggleIcon.src = '/data/images/svg/expand.svg';
            } else {
                console.log('else');
                console.log(topSpot.style.height);
                topSpot.style.height = '2.5vh';
                toggleIcon.src = '/data/images/svg/collapse.svg';
            }
        }
  
        document.getElementById('toggleTopBar').addEventListener('click', toggleTopBar);
    </script>
  
    <!-- Existing Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-79VER3NKGP"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-79VER3NKGP');
    </script>
  
    <script>
        /* const iframe = document.getElementById('fram');
        const urlInput = document.getElementById('uv-address');

        iframe.onload = function() {
            const iframeSrc = iframe.src;
            console.log("Iframe src:", iframeSrc); // Debugging log
            urlInput.value = iframeSrc;
        } */
    </script>

    <script>
        /*
        document.getElementById('uv-form').addEventListener('submit', function(event) {
            event.preventDefault();
            const urlInput = document.getElementById('uv-address');
            const newUrl = urlInput.value;

            const iframe = document.getElementById('fram');
            iframe.src = newUrl;

            document.getElementById('uv-form').onsubmit = function() {
              urlInput.value = "Loading.."
            }

            iframe.onload = function() {
                const iframeSrc = iframe.src;
                console.log("Iframe src:", iframeSrc); // Debugging log
                const serviceIndex = iframeSrc.indexOf('/service/');
                if (serviceIndex !== -1) {
                    const extractedText = iframeSrc.substring(serviceIndex + 9);
                    const decodedText = __uv$config.decodeUrl(extractedText);
                    urlInput.value = decodedText;
                } else {
                    console.warn('The string "/service/" was not found in the iframe src. Current src:', iframeSrc);
                    urlInput.value = iframeSrc; // Fallback to show the current src
                }
            };
        });
        */
    </script>
  
    <script>
       // Bookmark functionality
    const bookmarkList = document.getElementById('bookmark-list');
    const addBookmarkButton = document.getElementById('add-bookmark');
    const bookmarkNameInput = document.getElementById('bookmark-name');

    // Load bookmarks from local storage
    function loadBookmarks() {
        const bookmarks = JSON.parse(localStorage.getItem('bookmarks')) || [];
        bookmarks.forEach(bookmark => {
            addBookmarkToList(bookmark.name, bookmark.url);
        });
    }

    // Add bookmark to the list and local storage
    function addBookmarkToList(name, url) {
        const listItem = document.createElement('li');
        listItem.textContent = `${name}`;

        // Create a remove button
        const removeButton = document.createElement('button');
        removeButton.textContent = 'Ã—';
        removeButton.onclick = () => {
            removeBookmark(name, url);
            window.location.reload();
        };

        listItem.appendChild(removeButton);
        listItem.onclick = () => {
            document.getElementById('uv-address').value = url;
            document.getElementById('uv-form').dispatchEvent(new Event('submit'));
        };
        bookmarkList.appendChild(listItem);
    }

    // Remove bookmark function
    function removeBookmark(name, url) {
        // Remove from local storage
        const bookmarks = JSON.parse(localStorage.getItem('bookmarks')) || [];
        const updatedBookmarks = bookmarks.filter(bookmark => !(bookmark.name === name && bookmark.url === url));
        localStorage.setItem('bookmarks', JSON.stringify(updatedBookmarks));

        // Remove from the display
        loadBookmarks(); // Reload bookmarks to update the display
    }

    // Add bookmark button click event
    addBookmarkButton.addEventListener('click', () => {
        const name = bookmarkNameInput.value;
        const url = document.getElementById('uv-address').value;

        if (name && url) {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarks')) || [];
            bookmarks.push({ name, url });
            localStorage.setItem('bookmarks', JSON.stringify(bookmarks));
            addBookmarkToList(name, url);
            bookmarkNameInput.value = ''; // Clear input
        } else {
            alert('Please enter a name and ensure the URL is set.');
        }
    });

    // Initialize bookmarks on page load
    loadBookmarks();
    </script>
  
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const searchBox = document.getElementById('uv-address');
            const suggestionsBox = document.getElementById('suggestions-box');

            searchBox.addEventListener('input', async () => {
                const query = searchBox.value.trim();

                if (query.length > 0) {
                    const suggestions = await getSuggestions(query);
                    showSuggestions(suggestions);
                } else {
                    suggestionsBox.style.display = 'none';
                }
            });

            async function getSuggestions(query) {
                const response = await fetch(`/go=${encodeURIComponent(query)}`);
                const data = await response.json();
                return data;
            }

            function showSuggestions(suggestions) {
                suggestionsBox.innerHTML = '';

                if (suggestions.length > 0) {
                    suggestionsBox.style.display = 'block';
                    suggestions.forEach(suggestion => {
                        const suggestionItem = document.createElement('div');
                        suggestionItem.classList.add('suggestion-item');
                        suggestionItem.textContent = suggestion.phrase;
                        suggestionItem.addEventListener('click', () => {
                            searchBox.value = suggestion.phrase;
                            suggestionsBox.style.display = 'none';
                        });
                        suggestionsBox.appendChild(suggestionItem);
                    });
                } else {
                    suggestionsBox.style.display = 'none';
                }
            }
        });
    </script>
  
    <script type="text/javascript">setIframe();</script>
    <script src="./data/js/win.js"></script>
    <script src="./data/js/urlupd.js"></script>
</body>
</html>
